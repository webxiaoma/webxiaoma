(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{603:function(t,s,a){"use strict";a.r(s);var e=a(24),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"js-this-二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js-this-二"}},[t._v("#")]),t._v(" JS-This (二)")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#前言"}},[t._v("前言")])]),a("li",[a("a",{attrs:{href:"#ecmascript-中的数据类型"}},[t._v("ECMAScript 中的数据类型")])]),a("li",[a("a",{attrs:{href:"#引用类型-reference"}},[t._v("引用类型（Reference）")]),a("ul",[a("li",[a("a",{attrs:{href:"#getvalue"}},[t._v("GetValue")])])])]),a("li",[a("a",{attrs:{href:"#函数中this的确定"}},[t._v("函数中This的确定")]),a("ul",[a("li",[a("a",{attrs:{href:"#函数执行中的规范"}},[t._v("函数执行中的规范")])]),a("li",[a("a",{attrs:{href:"#实际例子"}},[t._v("实际例子")])])])]),a("li",[a("a",{attrs:{href:"#构造函数中的this"}},[t._v("构造函数中的This")])]),a("li",[a("a",{attrs:{href:"#改变this指向的方式"}},[t._v("改变This指向的方式")]),a("ul",[a("li",[a("a",{attrs:{href:"#call-方法"}},[t._v("call 方法")])]),a("li",[a("a",{attrs:{href:"#apply-方法"}},[t._v("apply 方法")])]),a("li",[a("a",{attrs:{href:"#bind-方法"}},[t._v("bind 方法")])])])]),a("li",[a("a",{attrs:{href:"#dom事件中this"}},[t._v("DOM事件中This")])])])]),a("p"),t._v(" "),a("p",[t._v("🐴")]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("在"),a("a",{attrs:{href:"/web/js/js-this1"}},[t._v("上一篇文章")]),t._v("中我们从"),a("code",[t._v("this")]),t._v("指向的多种情况来认识了一下"),a("code",[t._v("this")]),t._v("， 这篇文章中我们从"),a("code",[t._v("ECMAScritp")]),t._v(" 规范来看看"),a("code",[t._v("this")]),t._v(" 是如何确定的。")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("JavaScript")]),t._v("中，"),a("code",[t._v("this")]),t._v("是一直讨论的东西，并且在每个上下文创建时，"),a("code",[t._v("this")]),t._v("就被创建了，另外还有三个重要的属性也会被创建:"),a("a",{attrs:{href:"/web/js/js-variable"}},[t._v("变量对象")]),t._v("、"),a("a",{attrs:{href:"/web/js/js-scope-chain"}},[t._v("作用域链")]),t._v("。最近抽出了部分时间将"),a("code",[t._v("JavaScript")]),t._v("中"),a("code",[t._v("this")]),t._v("的知识汇总了一下。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://yanhaijing.com/es5/#about",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript 镜像版规范"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"ecmascript-中的数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ecmascript-中的数据类型"}},[t._v("#")]),t._v(" ECMAScript 中的数据类型")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("js")]),t._v("中的数据类型分为语言类型和规范类型：")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("语言类型")]),t._v(" "),a("code",[t._v("ECMAScript")]),t._v(" 语言类型 是 "),a("code",[t._v("ECMAScript")]),t._v(" 程序员使用 "),a("code",[t._v("ECMAScript")]),t._v(" 语言直接操作的值对应的类型。"),a("code",[t._v("ECMAScript")]),t._v(" 语言类型包括 未定义 （Undefined）、 空值 （Null）、 布尔值（Boolean）、 字符串 （String）、 数值 （Number）、 对象 （Object）。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("规范类型")])])])]),t._v(" "),a("p",[t._v("规范类型 是描述 "),a("code",[t._v("ECMAScript")]),t._v(" 语言构造与 "),a("code",[t._v("ECMAScript")]),t._v(" 语言类型语意的算法所用的元值对应的类型。规范类型包括 引用(Reference) 、 列表(List) 、 完结(Completion) 、 属性描述式(Property Descriptor) 、 属性标示(Property Identifier)、 词法环境（Lexical Environment）、 环境纪录（Environment Record）。规范类型的值是不一定对应 "),a("code",[t._v("ECMAScript")]),t._v(" 实现里任何实体的虚拟对象。规范类型可用来描述 "),a("code",[t._v("ECMAScript")]),t._v(" 表式运算的中途结果，但是这些值不能存成对象的变量或是 "),a("code",[t._v("ECMAScript")]),t._v(" 语言变量的值。")]),t._v(" "),a("h2",{attrs:{id:"引用类型-reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引用类型-reference"}},[t._v("#")]),t._v(" 引用类型（Reference）")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[a("strong",[t._v("该引用类型是规范中的数据类型，并不是javascript实际代码中的引用类型（因为我们常说Object是引用类型，这里的"),a("code",[t._v("Reference")]),t._v("并不是指的它）")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.zhihu.com/question/31911373",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript 规范中的Reference Specification Type的含义?"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.w3.org/html/ig/zh/wiki/ES5/%E7%B1%BB%E5%9E%8B#.E5.BC.95.E7.94.A8.E8.A7.84.E8.8C.83.E7.B1.BB.E5.9E.8B",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C ES5/类型"),a("OutboundLink")],1)])])]),t._v(" "),a("p",[t._v("上面说了"),a("code",[t._v("ECMAScript")]),t._v("中的数据类型，其中规范类型中的"),a("a",{attrs:{href:"https://yanhaijing.com/es5/#80",target:"_blank",rel:"noopener noreferrer"}},[t._v("引用类型"),a("code",[t._v("Reference")]),a("OutboundLink")],1),t._v("和"),a("code",[t._v("this")]),t._v("有这亲密的关系。引用类型"),a("code",[t._v("Reference")]),t._v(" 是规范中的类型，在js中并不存在，只是存在于"),a("code",[t._v("ECMAScript")]),t._v("底层。引用类型"),a("code",[t._v("Reference")]),t._v("包含有三个重要的属性:")]),t._v(" "),a("ul",[a("li",[t._v("基值（base）：属性所在的环境对象，可以是 "),a("code",[t._v("undefined")]),t._v(", "),a("code",[t._v("Object")]),t._v(","),a("code",[t._v("Boolean")]),t._v(","),a("code",[t._v("String")]),t._v(","),a("code",[t._v("Number")]),t._v(",  "),a("code",[t._v("environment record")]),t._v("中的任意一个，当所处的环境是全局环境(在全局中，或"),a("code",[t._v("setTimeout")]),t._v("或"),a("code",[t._v("setInterval")]),t._v(")，或执行环境中时值为"),a("a",{attrs:{href:"https://yanhaijing.com/es5/#142",target:"_blank",rel:"noopener noreferrer"}},[t._v("environment record"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("引用名称（referenced name）：该引用名称，是一个字符串")]),t._v(" "),a("li",[t._v("严格引用标志 (strict reference)：是否是严格模式，"),a("code",[t._v("true")]),t._v("为严格模式")])]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的引用类型Reference， a处于全局环境")]),t._v("\nAReferenceObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("EnvironmentRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  strict"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二种基值为EnvironmentRecord情况 ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//f执行时处于函数fun的执行环境中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//函数f的引用类型Reference")]),t._v("\nFReferenceObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("EnvironmentRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'f'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  strict"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("在例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fun对应的Reference是：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" FunReferenceObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fun'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    strict"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("另外引用类型"),a("code",[t._v("Reference")]),t._v("除了拥有三个重要的属性外，还提供了一些方法比如：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("GetBase(V)")]),t._v("。 返回引用值 "),a("code",[t._v("V")]),t._v(" 的基值, base的值。")]),t._v(" "),a("li",[a("code",[t._v("GetReferencedName(V)")]),t._v("。 返回引用值 "),a("code",[t._v("V")]),t._v(" 的引用名称。")]),t._v(" "),a("li",[a("code",[t._v("IsStrictReference(V)")]),t._v("。 返回引用值 "),a("code",[t._v("V")]),t._v(" 的严格引用。")]),t._v(" "),a("li",[a("code",[t._v("HasPrimitiveBase(V)")]),t._v("。 如果基值是 "),a("code",[t._v("Boolean")]),t._v(", "),a("code",[t._v("String")]),t._v(", "),a("code",[t._v("Number")]),t._v("，那么返回 "),a("code",[t._v("true")]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("IsPropertyReference(V)")]),t._v("。 如果基值是个对象或 "),a("code",[t._v("HasPrimitiveBase(V)")]),t._v(" 是 "),a("code",[t._v("true")]),t._v("，那么返回 "),a("code",[t._v("true")]),t._v("；否则返回 "),a("code",[t._v("false")]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("IsUnresolvableReference(V)")]),t._v("。 如果基值是 "),a("code",[t._v("undefined")]),t._v(" 那么返回 "),a("code",[t._v("true")]),t._v("，否则返回 "),a("code",[t._v("false")]),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"getvalue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getvalue"}},[t._v("#")]),t._v(" GetValue")]),t._v(" "),a("p",[t._v("另外"),a("code",[t._v("ECMAScript")]),t._v(" 还提提供了一个"),a("a",{attrs:{href:"https://yanhaijing.com/es5/#81",target:"_blank",rel:"noopener noreferrer"}},[t._v("GetValue(v)"),a("OutboundLink")],1),t._v(" 方法，它的作用就是获取"),a("code",[t._v("Reference")]),t._v("中的具体值。"),a("strong",[t._v("当使用"),a("code",[t._v("GetValue(v)")]),t._v("方法时，返回的是具体值，不在是一个引用类型"),a("code",[t._v("Reference")])]),t._v(" 例如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的引用类型Reference")]),t._v("\nAReferenceObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("EnvironmentRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局对象")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  strict"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AReferenceObj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回值为1 ，1可不再是引用类型")]),t._v("\n")])])]),t._v(" "),a("h2",{attrs:{id:"函数中this的确定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数中this的确定"}},[t._v("#")]),t._v(" 函数中This的确定")]),t._v(" "),a("h3",{attrs:{id:"函数执行中的规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数执行中的规范"}},[t._v("#")]),t._v(" 函数执行中的规范")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("ECMAScript")]),t._v(" 规范中，"),a("a",{attrs:{href:"https://yanhaijing.com/es5/#164",target:"_blank",rel:"noopener noreferrer"}},[t._v("函数的调用"),a("OutboundLink")],1),t._v("解释了"),a("code",[t._v("this")]),t._v("是如何确定的")]),t._v(" "),a("blockquote",[a("ol",[a("li",[t._v("令 "),a("code",[t._v("ref")]),t._v(" 为解释执行 "),a("code",[t._v("MemberExpression")]),t._v(" 的结果")])]),t._v(" "),a("p",[t._v("...")]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[t._v("如果 "),a("code",[t._v("Type(ref)")]),t._v(" 为 "),a("code",[t._v("Reference")]),t._v("，那么 如果 "),a("code",[t._v("IsPropertyReference(ref)")]),t._v(" 为 "),a("code",[t._v("true")]),t._v("，那么 令 "),a("code",[t._v("thisValue")]),t._v(" 为 "),a("code",[t._v("GetBase(ref)")]),t._v(". 否则 , "),a("code",[t._v("ref")]),t._v(" 的基值是一个环境记录项 令 "),a("code",[t._v("thisValue")]),t._v(" 为调用 "),a("code",[t._v("GetBase(ref)")]),t._v(" 的 "),a("code",[t._v("ImplicitThisValue")]),t._v(" 具体方法的结果")]),t._v(" "),a("li",[t._v("否则 , 假如 "),a("code",[t._v("Type(ref)")]),t._v(" 不是 "),a("code",[t._v("Reference")]),t._v(". 令 "),a("code",[t._v("thisValue")]),t._v(" 为 "),a("code",[t._v("undefined")]),t._v(".\n返回调用 "),a("code",[t._v("func")]),t._v(" 的 [[Call]] 内置方法的结果 , 传入 "),a("code",[t._v("thisValue")]),t._v(" 作为 "),a("code",[t._v("this")]),t._v(" 值和列表 "),a("code",[t._v("argList")]),t._v(" 作为参数列表")])])]),t._v(" "),a("p",[t._v("上面函数调用时确定"),a("code",[t._v("this")]),t._v("的值说清楚点就是：")]),t._v(" "),a("ol",[a("li",[t._v("将"),a("code",[t._v("MemberExpression")]),t._v("解析后的结果赋值给"),a("code",[t._v("ref")]),t._v(" ("),a("a",{attrs:{href:"https://yanhaijing.com/es5/#161",target:"_blank",rel:"noopener noreferrer"}},[t._v("MemberExpression"),a("OutboundLink")],1),t._v("就是函数调用时括号左边的部分，如："),a("code",[t._v("foo")]),t._v("()中的"),a("code",[t._v("MemberExpression")]),t._v("为"),a("code",[t._v("foo")]),t._v(")")]),t._v(" "),a("li",[t._v("使用"),a("code",[t._v("Type(ref)")]),t._v("判断"),a("code",[t._v("ref")]),t._v("是不是"),a("code",[t._v("Reference")]),t._v("类型，判断时有如下几种情况")])]),t._v(" "),a("ul",[a("li",[t._v("如果 "),a("code",[t._v("ref")]),t._v(" 是 引用类型"),a("code",[t._v("Reference")]),t._v("，并且 基值是否是对象（"),a("code",[t._v("IsPropertyReference(ref)")]),t._v(" 是 "),a("code",[t._v("true")]),t._v("), 那么 "),a("code",[t._v("this")]),t._v(" 的值为 基值"),a("code",[t._v("GetBase(ref)")])]),t._v(" "),a("li",[t._v("如果 "),a("code",[t._v("ref")]),t._v(" 是 引用类型"),a("code",[t._v("Reference")]),t._v("，并且 "),a("code",[t._v("base value")]),t._v(" 值是 "),a("code",[t._v("Environment Record")]),t._v(", 那么"),a("code",[t._v("this")]),t._v("的值为 "),a("code",[t._v("ImplicitThisValue(ref)")]),t._v("（js中为"),a("code",[t._v("window")]),t._v("）")]),t._v(" "),a("li",[t._v("如果 "),a("code",[t._v("ref")]),t._v(" 不是 引用类型"),a("code",[t._v("Reference")]),t._v("，那么 "),a("code",[t._v("this")]),t._v(" 的值为 "),a("code",[t._v("undefined")]),t._v(",(js中严格模式下为"),a("code",[t._v("undefined")]),t._v(",非严格模式下为"),a("code",[t._v("window")]),t._v(",可以通过"),a("code",[t._v("IsStrictReference(ref)")]),t._v("来确定是否是严格模式)")])]),t._v(" "),a("p",[t._v("上面我们说了函数调用时"),a("a",{attrs:{href:"https://yanhaijing.com/es5/#161",target:"_blank",rel:"noopener noreferrer"}},[t._v("MemberExpression"),a("OutboundLink")],1),t._v("就是括号左边的，如：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MemberExpression 为f")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nobj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MemberExpression 为obj.fun")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MemberExpression 为fun()")]),t._v("\n\nobj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'funName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MemberExpression 为obj['funName']")]),t._v("\n")])])]),a("p",[t._v("第二步我们很重要的就是需要判断"),a("code",[t._v("ref")]),t._v(" 是否是引用类型，一般"),a("code",[t._v("ref")]),t._v("是引用类型的情况有两种：")]),t._v(" "),a("ul",[a("li",[t._v("函数标示符")]),t._v(" "),a("li",[t._v("属性访问器（点"),a("code",[t._v(".")]),t._v("属性访问器或中括号"),a("code",[t._v("[]")]),t._v("属性访问器）")])]),t._v(" "),a("h3",{attrs:{id:"实际例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实际例子"}},[t._v("#")]),t._v(" 实际例子")]),t._v(" "),a("p",[t._v("下面我们来使用实际列子看看函数调用时"),a("code",[t._v("this")]),t._v("的值是如何确定的")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nfoo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例子1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例子2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例子3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例子4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例子5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例子6")]),t._v("\n")])])]),a("ol",[a("li",[a("p",[a("code",[t._v("foo.bar()")]),t._v("在执行时，"),a("code",[t._v("MemberExpression")]),t._v("为"),a("code",[t._v("foo.bar")]),t._v(", 并将"),a("code",[t._v("MemberExpression")]),t._v("赋值给了"),a("code",[t._v("ref")]),t._v("；然后通过"),a("code",[t._v("Type(ref)")]),t._v("判断"),a("code",[t._v("foo.bar")]),t._v("是不是引用类型，因为"),a("code",[t._v("foo.bar")]),t._v("是属性访问器形式，所以"),a("code",[t._v("foo.bar")]),t._v("是引用类型; 然后判断基值是否是对象"),a("code",[t._v("IsPropertyReference(ref)")]),t._v(", "),a("code",[t._v("foo.bar")]),t._v("是对象所以"),a("code",[t._v("this")]),t._v("确定为"),a("code",[t._v("foo")]),t._v("对象(通过"),a("code",[t._v("GetBase(ref)")]),t._v("获取 "),a("code",[t._v("this = GetBase(ref)")]),t._v(")")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("(foo.bar)()")]),t._v("在执行时"),a("code",[t._v("()")]),t._v("并没有使用"),a("code",[t._v("GetValue")]),t._v("对"),a("code",[t._v("MemberExpression")]),t._v("进行处理，所以"),a("code",[t._v("MemberExpression")]),t._v("为"),a("code",[t._v("foo.bar")]),t._v(", 接下来的情况和例一就一样了。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("(foo.bar = foo.bar)()")]),t._v("在执行时，在左边括号中"),a("code",[t._v("foo.bar = foo.bar")]),t._v("因为使用了赋值运算"),a("code",[t._v("=")]),t._v("，此时调用了"),a("code",[t._v("GetValue")]),t._v(" 方法，将"),a("code",[t._v("foo.bar")]),t._v("最终的值不在是引用类型（上面说了调用"),a("code",[t._v("GetValue")]),t._v("方法返回的是具体值，不在是一个引用类型"),a("code",[t._v("Reference")]),t._v("）, 所以"),a("code",[t._v("this")]),t._v("为"),a("code",[t._v("undefined")]),t._v("，之后还会通过"),a("code",[t._v("IsStrictReference(V)")]),t._v("判断是否在严格模式下，如果不是"),a("code",[t._v("this")]),t._v("为"),a("code",[t._v("undefined")]),t._v("时，"),a("code",[t._v("this")]),t._v("将隐士转换为全局对象"),a("code",[t._v("window")]),t._v(" 或 "),a("code",[t._v("global")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("(false || foo.bar)()")]),t._v("在执行时，逻辑运算符也会调用"),a("code",[t._v("GetValue")]),t._v(" 方法，所以最终"),a("code",[t._v("this")]),t._v("结果和例三一样")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("(foo.bar, foo.bar)()")]),t._v("在执行时，逗号运算符也会调用"),a("code",[t._v("GetValue")]),t._v(" 方法，所以最终"),a("code",[t._v("this")]),t._v("结果和例三一样")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fun()")]),t._v("在执行时，因为"),a("code",[t._v("fun")]),t._v("是一个标识符所以"),a("code",[t._v("ref")]),t._v("会是引用类型；但是引用类型的基值是"),a("code",[t._v("EnvironmentRecord")]),t._v("，它并不是一个对象，通过"),a("code",[t._v("IsPropertyReference(ref)")]),t._v("判断返回"),a("code",[t._v("false")]),t._v("，此时"),a("code",[t._v("this")]),t._v("值为"),a("code",[t._v("ImplicitThisValue(ref)")]),t._v(","),a("code",[t._v("ImplicitThisValue(ref)")]),t._v("函数通常会返回"),a("code",[t._v("undefined")]),t._v("（"),a("a",{attrs:{href:"https://yanhaijing.com/es5/#128",target:"_blank",rel:"noopener noreferrer"}},[t._v("声明式环境"),a("OutboundLink")],1),t._v(","),a("a",{attrs:{href:"https://yanhaijing.com/es5/#137",target:"_blank",rel:"noopener noreferrer"}},[t._v("对象式环境"),a("OutboundLink")],1),t._v("）；之后还会通过"),a("code",[t._v("IsStrictReference(V)")]),t._v("判断是否在严格模式下，如果不是"),a("code",[t._v("this")]),t._v("为"),a("code",[t._v("undefined")]),t._v("时，"),a("code",[t._v("this")]),t._v("将隐士转换为全局对象"),a("code",[t._v("window")]),t._v(" 或 "),a("code",[t._v("global")])])])]),t._v(" "),a("h2",{attrs:{id:"构造函数中的this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构造函数中的this"}},[t._v("#")]),t._v(" 构造函数中的This")]),t._v(" "),a("p",[t._v("在构造函数中"),a("code",[t._v("this")]),t._v("还是很好确定的，在构造函数中"),a("code",[t._v("this")]),t._v("永远指向通过构造函数创建的对象。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("people")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"king"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("52")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" one "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" two "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("People")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("上面在构造函数中的"),a("code",[t._v("this")]),t._v("会指向通过"),a("code",[t._v("new")]),t._v("创建出来的对象。第一种情况下"),a("code",[t._v("people")]),t._v("中的"),a("code",[t._v("this")]),t._v("指向 "),a("code",[t._v("one")]),t._v("对象，第二种情况下"),a("code",[t._v("people")]),t._v("中的"),a("code",[t._v("this")]),t._v("指向 "),a("code",[t._v("two")]),t._v("对象")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("tom大叔")]),t._v(" "),a("p",[t._v("针对上面的构造函数"),a("code",[t._v("new")]),t._v("运算符调用"),a("code",[t._v("people")]),t._v("函数的内部的"),a("code",[t._v("[[Construct]]")]),t._v(" 方法，接着，在对象创建后，调用内部的"),a("code",[t._v("[[Call]]")]),t._v(" 方法。 所有相同的函数"),a("code",[t._v("people")]),t._v("都将"),a("code",[t._v("this")]),t._v("的值设置为新创建的对象。")])]),t._v(" "),a("h2",{attrs:{id:"改变this指向的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改变this指向的方式"}},[t._v("#")]),t._v(" 改变This指向的方式")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("js")]),t._v("我们可以使用"),a("code",[t._v("call")]),t._v("、"),a("code",[t._v("apply")]),t._v("、"),a("code",[t._v("bind")]),t._v("、方法可以来改变"),a("code",[t._v("this")]),t._v("的指向的。下面我们来看看着几个方法的使用。")]),t._v(" "),a("h3",{attrs:{id:"call-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#call-方法"}},[t._v("#")]),t._v(" call 方法")]),t._v(" "),a("p",[a("code",[t._v("call")]),t._v("方法可以执行一个函数，并改变一个函数中"),a("code",[t._v("this")]),t._v("的指向,"),a("code",[t._v("call")]),t._v("方法中有多个参数，第一个参数是"),a("code",[t._v("this")]),t._v("指向对象，后面的参数就是调用函数时传入的参数。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"King"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"global"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//King; 50 30")]),t._v("\n")])])]),a("p",[t._v("我们会发现通过"),a("code",[t._v("call")]),t._v("调用函数"),a("code",[t._v("fun")]),t._v("后，"),a("code",[t._v("fun")]),t._v("函数内部的"),a("code",[t._v("this")]),t._v("指向了对象"),a("code",[t._v("obj")]),t._v(",并且传入了两个参数"),a("code",[t._v("50 30")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"apply-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apply-方法"}},[t._v("#")]),t._v(" apply 方法")]),t._v(" "),a("p",[a("code",[t._v("apply")]),t._v("方法也是可以执行一个函数，并改变一个函数中"),a("code",[t._v("this")]),t._v("的指向，和"),a("code",[t._v("call")]),t._v("方法不同的是，"),a("code",[t._v("apply")]),t._v("方法的第二个参数传入的是一个数组。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"King"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"global"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//King; 50 30")]),t._v("\n")])])]),a("h3",{attrs:{id:"bind-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bind-方法"}},[t._v("#")]),t._v(" bind 方法")]),t._v(" "),a("p",[a("code",[t._v("js")]),t._v("中"),a("code",[t._v("bind")]),t._v("方法可以给函数中"),a("code",[t._v("this")]),t._v("绑定一个固定的对象，并返回一个新函数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"King"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"global"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" newFun "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newFun")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//King")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newFun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// King")]),t._v("\n")])])]),a("p",[t._v("通过例子我们可以看到，通过"),a("code",[t._v("bind")]),t._v("方法处理后，返回的新函数中的"),a("code",[t._v("this")]),t._v("永远都会指向同一个对象，而不会随着函数的调用方式不同而改变。")]),t._v(" "),a("h2",{attrs:{id:"dom事件中this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom事件中this"}},[t._v("#")]),t._v(" DOM事件中This")]),t._v(" "),a("p",[a("code",[t._v("DOM")]),t._v("事件中绑定的函数中的"),a("code",[t._v("this")]),t._v("指向触发该事件的"),a("code",[t._v("DOM")]),t._v("元素，这点毋庸置疑。")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("DOM事件中This")]),t._v(" "),a("p",[t._v("关于"),a("code",[t._v("DOM")]),t._v("事件中"),a("code",[t._v("This")]),t._v(" 虽然知道指向触发该事件的"),a("code",[t._v("DOM")]),t._v("元素，但是在"),a("code",[t._v("ECMAScript")]),t._v("规范中是如何实现的，我目前不太确定，希望知道的同学可以提供一下帮助。")])]),t._v(" "),a("p",[a("strong",[t._v("参考链接：")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/TomXu/archive/2012/01/17/2310479.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("This? Yes,this!"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/7",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript深入之从ECMAScript规范解读this"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);