<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FileReader和FormData对象 | 马新想个人网站（webxiaoma）</title>
    <meta name="description" content="本文主要讲述使用js处理数据，将数据转化为FormData格式的数据，使用FileReader处理二进制数据。">
    <link rel="icon" href="/img/icon.ico">
    <meta name="keywords" content="FileReader, FormData, js webp API，表单数据，form">
    <link rel="preload" href="/assets/css/0.styles.74caf1e0.css" as="style"><link rel="preload" href="/assets/js/app.b2ae7260.js" as="script"><link rel="preload" href="/assets/js/19.f6bd8cb6.js" as="script"><link rel="prefetch" href="/assets/js/34.a34f4846.js"><link rel="prefetch" href="/assets/js/2.eea0509a.js"><link rel="prefetch" href="/assets/js/3.43396bde.js"><link rel="prefetch" href="/assets/js/4.a34de17b.js"><link rel="prefetch" href="/assets/js/5.28645c17.js"><link rel="prefetch" href="/assets/js/6.633ae4c3.js"><link rel="prefetch" href="/assets/js/7.f798916b.js"><link rel="prefetch" href="/assets/js/8.9132a3ef.js"><link rel="prefetch" href="/assets/js/9.a97a34b1.js"><link rel="prefetch" href="/assets/js/10.b005ef09.js"><link rel="prefetch" href="/assets/js/11.f232969e.js"><link rel="prefetch" href="/assets/js/12.78fd53ea.js"><link rel="prefetch" href="/assets/js/13.fa0077cc.js"><link rel="prefetch" href="/assets/js/14.c2196c77.js"><link rel="prefetch" href="/assets/js/15.26163df1.js"><link rel="prefetch" href="/assets/js/16.6b374e2b.js"><link rel="prefetch" href="/assets/js/17.18388c61.js"><link rel="prefetch" href="/assets/js/18.dac3728d.js"><link rel="prefetch" href="/assets/js/20.c62c4279.js"><link rel="prefetch" href="/assets/js/21.6153d8ab.js"><link rel="prefetch" href="/assets/js/22.2722270f.js"><link rel="prefetch" href="/assets/js/23.78008308.js"><link rel="prefetch" href="/assets/js/24.ac44d253.js"><link rel="prefetch" href="/assets/js/25.86e3b021.js"><link rel="prefetch" href="/assets/js/26.90a481bb.js"><link rel="prefetch" href="/assets/js/27.ff7b9672.js"><link rel="prefetch" href="/assets/js/28.c4d19f09.js"><link rel="prefetch" href="/assets/js/29.b76a45c7.js"><link rel="prefetch" href="/assets/js/30.864c2461.js"><link rel="prefetch" href="/assets/js/31.851ad36b.js"><link rel="prefetch" href="/assets/js/32.a9f71aef.js"><link rel="prefetch" href="/assets/js/33.5bf3f159.js"><link rel="prefetch" href="/assets/js/35.b3be92bb.js"><link rel="prefetch" href="/assets/js/36.9a9ff3c7.js"><link rel="prefetch" href="/assets/js/37.f1c1aace.js"><link rel="prefetch" href="/assets/js/38.420f9576.js"><link rel="prefetch" href="/assets/js/39.ac95da6f.js"><link rel="prefetch" href="/assets/js/40.c6dc367b.js"><link rel="prefetch" href="/assets/js/41.5b334acc.js"><link rel="prefetch" href="/assets/js/42.69458751.js"><link rel="prefetch" href="/assets/js/43.7c02e93f.js"><link rel="prefetch" href="/assets/js/44.84b5d06e.js"><link rel="prefetch" href="/assets/js/45.813e4b4d.js"><link rel="prefetch" href="/assets/js/46.c6156030.js"><link rel="prefetch" href="/assets/js/47.550c3ae9.js"><link rel="prefetch" href="/assets/js/48.d2912253.js"><link rel="prefetch" href="/assets/js/49.84805ca5.js"><link rel="prefetch" href="/assets/js/50.4876a744.js"><link rel="prefetch" href="/assets/js/51.3c7d99dc.js"><link rel="prefetch" href="/assets/js/52.266e8c65.js"><link rel="prefetch" href="/assets/js/53.b34c3aa8.js"><link rel="prefetch" href="/assets/js/54.43f4a598.js"><link rel="prefetch" href="/assets/js/55.dd48397d.js"><link rel="prefetch" href="/assets/js/56.36a3fb4c.js"><link rel="prefetch" href="/assets/js/57.93807266.js"><link rel="prefetch" href="/assets/js/58.0249c302.js"><link rel="prefetch" href="/assets/js/59.a1f26f85.js"><link rel="prefetch" href="/assets/js/60.6c346822.js"><link rel="prefetch" href="/assets/js/61.7d44ac72.js"><link rel="prefetch" href="/assets/js/62.154d5364.js"><link rel="prefetch" href="/assets/js/63.06792006.js"><link rel="prefetch" href="/assets/js/64.186b4a2d.js"><link rel="prefetch" href="/assets/js/65.05fed278.js"><link rel="prefetch" href="/assets/js/66.74f2b2b7.js"><link rel="prefetch" href="/assets/js/67.7f614d29.js"><link rel="prefetch" href="/assets/js/68.83a62e25.js"><link rel="prefetch" href="/assets/js/69.0727e735.js"><link rel="prefetch" href="/assets/js/70.dd08164d.js"><link rel="prefetch" href="/assets/js/71.9156d593.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74caf1e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/manong.jpg" alt="马新想" class="logo"> <span class="site-name can-hide">马新想个人网站</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide" data-v-b0e23420><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-b0e23420><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        博客
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        JavaScript
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        移动端
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          构建工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Git工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>GitHub</a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma/webxiaoma/issues" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>提出疑问</a></li></ul></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar" data-v-5534fc3a><nav class="nav-links" data-v-b0e23420 data-v-5534fc3a><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-b0e23420><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        博客
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        JavaScript
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        移动端
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          构建工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Git工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>GitHub</a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma/webxiaoma/issues" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>提出疑问</a></li></ul></nav>  <ul class="sidebar-links" data-v-5534fc3a><li data-v-5534fc3a><a href="/javascript/" class="sidebar-link" data-v-5534fc3a>网站</a></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>基础篇</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>ES6篇</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>音频视频处理</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading open"><span>文件与二进制处理</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/javascript/ArrayBuffer处理二进制.html" class="sidebar-link">ArrayBuffer处理二进制</a></li><li><a href="/javascript/Blob处理类文件对象.html" class="sidebar-link">Blob处理类文件对象</a></li><li><a href="/javascript/FileReader和FormData对象.html" class="active sidebar-link">FileReader和FormData对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#filereader-api" class="sidebar-link">FileReader API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#_1、-filereader-的读取文件的方法" class="sidebar-link">1、 FileReader 的读取文件的方法</a></li><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#_2、-filereader-的事件" class="sidebar-link">2、 FileReader 的事件</a></li><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#_3-filereader-的用法" class="sidebar-link">3. FileReader 的用法</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#image-对象" class="sidebar-link">Image 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#_1-image的使用" class="sidebar-link">1. Image的使用</a></li><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#_2-image的一些属性" class="sidebar-link">2. Image的一些属性</a></li><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#_3-image的事件" class="sidebar-link">3. Image的事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/FileReader和FormData对象.html#formdata-对象" class="sidebar-link">FormData 对象</a></li></ul></li><li><a href="/javascript/base64处理.html" class="sidebar-link">base64处理</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="filereader和formdata对象"><a href="#filereader和formdata对象" aria-hidden="true" class="header-anchor">#</a> FileReader和FormData对象</h1> <hr> <h2 id="filereader-api"><a href="#filereader-api" aria-hidden="true" class="header-anchor">#</a> <code>FileReader</code> API</h2> <p><code>FileReader</code> 对象允许Web应用程序异步读取存储在用户计算机上的文件（或原始数据缓冲区）的内容，它的参数是 <code>File</code> 或 <code>Blob</code> 对象。<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>其中<code>File</code>对象可以是来自用户在一个 <code>&lt;input&gt;</code>元素上选择文件后返回的<code>FileList</code>对象,也可以来自拖放操作生成的<code>DataTransfer</code>对象,还可以是来自在一个<code>HTMLCanvasElement</code>上执行<code>mozGetAsFile()</code>方法后返回结果。</p> <p>该API 的兼容性 <a href="https://caniuse.com/#search=FileReader" target="_blank" rel="noopener noreferrer">查看FileReader兼容性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1、-filereader-的读取文件的方法"><a href="#_1、-filereader-的读取文件的方法" aria-hidden="true" class="header-anchor">#</a> 1、 <code>FileReader</code> 的读取文件的方法</h3> <ul><li><code>readAsBinaryString(Blob|File)</code>：返回二进制字符串，该字符串每个字节包含一个0到255之间的整数。</li> <li><code>readAsText(Blob|File, opt_encoding)</code>：返回文本字符串。默认情况下，文本编码格式是’UTF-8’，可以通过可选的格式参数，指定其他编码格式的文本。</li> <li><code>readAsDataURL(Blob|File)</code>：返回一个基于Base64编码的data-uri对象。</li> <li><code>readAsArrayBuffer(Blob|File)</code>：返回一个ArrayBuffer对象。</li> <li><code>abort()</code> 中断读取</li></ul> <p>FileReader 的实例拥有 4 个方法，其中 3 个用以读取文件，另一个用来中断读取。需要注意的是 ，无论读取成功或失败，方法并不会返回读取结果，这一结果存储在 result属性中。</p> <h3 id="_2、-filereader-的事件"><a href="#_2、-filereader-的事件" aria-hidden="true" class="header-anchor">#</a> 2、 <code>FileReader</code> 的事件</h3> <ul><li><code>onabort</code>方法：读取中断或调用reader.abort()方法时触发。</li> <li><code>onerror</code>方法：读取出错时触发。</li> <li><code>onload</code>方法：读取成功后触发。</li> <li><code>onloadend</code>方法：读取完成后触发，不管是否成功。触发顺序排在 onload 或 onerror 后面。</li> <li><code>onloadstart</code>方法：读取将要开始时触发。</li> <li><code>onprogress</code>方法：读取过程中周期性触发。</li></ul> <p>文件一旦开始读取，无论成功或失败，实例的 result 属性都会被填充。如果读取失败，则 result 的值为 null ，否则即是读取的结果，绝大多数的程序都会在成功读取文件的时候，抓取这个值</p> <h3 id="_3-filereader-的用法"><a href="#_3-filereader-的用法" aria-hidden="true" class="header-anchor">#</a> 3. <code>FileReader</code> 的用法</h3> <p>当文件读取时，会触发响应的事件，我们可以从事件对象中获取文件流的一些信息，并且文件读取的结果会储存在<code>result</code>这个属性中。需要注意的是，读取文件的方法不能同时进行。</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">let</span> inp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span>

inp<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">let</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
   <span class="token keyword">let</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

   <span class="token comment">//返回二进制字符串，该字符串每个字节包含一个0到255之间的整数。</span>
   fileReader<span class="token punctuation">.</span><span class="token function">readAsBinaryString</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
<span class="token comment">//    fileReader.readAsText(file)</span>
<span class="token comment">//    fileReader.readAsDataURL(file)</span>
<span class="token comment">//    fileReader.readAsArrayBuffer(file)</span>

   fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// 获取的文件流存储在res.target.result 中</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   fileReader<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="image-对象"><a href="#image-对象" aria-hidden="true" class="header-anchor">#</a> Image 对象</h2> <p><a href="http://javascript.ruanyifeng.com/dom/image.html" target="_blank" rel="noopener noreferrer">参考文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1-image的使用"><a href="#_1-image的使用" aria-hidden="true" class="header-anchor">#</a> 1. Image的使用</h3> <p><code>&lt;img&gt;</code>元素用于插入图片，主要继承了 HTMLImageElement 接口。</p> <p>浏览器提供一个原生构造函数Image，用于生成HTMLImageElement实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img <span class="token keyword">instanceof</span> <span class="token class-name">Image</span> <span class="token comment">// true</span>
img <span class="token keyword">instanceof</span> <span class="token class-name">HTMLImageElement</span> <span class="token comment">// true</span>
</code></pre></div><p><code>Image</code>构造函数可以接受两个整数作为参数，分别表示<code>&lt;img&gt;</code>元素的宽度和长度。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 语法</span>
<span class="token function">Image</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>

<span class="token comment">// 用法</span>
<span class="token keyword">var</span> myImage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-image的一些属性"><a href="#_2-image的一些属性" aria-hidden="true" class="header-anchor">#</a> 2. Image的一些属性</h3> <ul><li><code>HTMLImageElement.src</code>返回图像的完整网址。</li> <li><code>HTMLImageElement.currentSrc</code>返回当前展示的图像的网址。<code>Js</code> 和 <code>CSS</code> 的 <code>mediaQuery</code> 都可能改变正在展示的图像。</li> <li><code>HTMLImageElement.alt</code>可以读写<code>&lt;img&gt;</code>的 <code>HTML</code> 属性<code>alt</code>，表示对图片的文字说明。</li> <li><code>HTMLImageElement.isMap</code>对应<code>&lt;img&gt;</code>元素的 <code>HTML</code> 属性<code>ismap</code>，返回一个布尔值，表示图像是否为服务器端的图像映射的一部分。</li> <li><code>HTMLImageElement.useMap</code>对应<code>&lt;img&gt;</code>元素的 <code>HTML</code> 属性<code>usemap</code>，表示当前图像对应的<code>&lt;map&gt;</code>元素。</li> <li><code>HTMLImageElement.srcset</code>读写<code>&lt;img&gt;</code>元素的<code>srcset</code>属性</li> <li><code>HTMLImageElement.sizes</code>读写<code>sizes</code>属性</li> <li><code>HTMLImageElement.naturalWidth</code>和<code>HTMLImageElement.naturalHeight</code>分别返回图像的实际宽度和高度</li> <li><code>HTMLImageElement.width和HTMLImageElement.height</code>返回<code>img</code>中的<code>width</code>和<code>height</code> 如果没有则返回图像的实际宽度和高度</li> <li><code>HTMLImageElement.complete</code>属性返回一个布尔值，表示图表是否已经加载完成。如果<code>&lt;img&gt;</code>元素没有<code>src</code>属性，也会返回true。</li> <li><code>HTMLImageElement.crossOrigin</code>属性用于读写<code>&lt;img&gt;</code>元素的<code>crossorigin</code>属性，表示跨域设置。这个属性有两个可能的值：<code>anonymous</code>：跨域请求不要求用户身份（credentials），这是默认值；<code>use-credentials</code>：跨域请求要求用户身份。</li> <li><code>HTMLImageElement.referrerPolicy</code>用来读写<code>&lt;img&gt;</code>元素的 HTML 属性<code>referrerpolicy</code>，表示请求图像资源时，如何处理 HTTP 请求的<code>referrer</code>字段。</li> <li><code>HTMLImageElement.x</code>属性返回图像左上角相对于页面左上角的横坐标，<code>HTMLImageElement.y</code>属性返回纵坐标。</li></ul> <h3 id="_3-image的事件"><a href="#_3-image的事件" aria-hidden="true" class="header-anchor">#</a> 3. Image的事件</h3> <p>图像加载完成会触发 <code>onload</code> 事件， 加载失败会触发 <code>onerror</code> 事件， 需要注意的是在<code>Image</code> 未加载完成前，是访问不到他的一些属性（比如宽，高等）的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;http://www.webxiaoma.com/assets/images/manong.jpg&quot;</span>

img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="formdata-对象"><a href="#formdata-对象" aria-hidden="true" class="header-anchor">#</a> FormData 对象</h2> <p><code>XMLHttpRequest Level2</code>添加了一个新的接口<code>FormData</code>. 利用<code>FormData</code>对象,我们可以通过<code>JavaScript</code>用一些键值对来模拟一系列表单控件,我们还可以使用<code>XMLHttpRequest</code>的<code>send()</code>方法来异步的提交这个&quot;表单&quot;.比起普通的<code>ajax</code>,使用<code>FormData</code>的最大优点就是我们可以异步上传一个二进制文件.</p> <p><code>FormData</code>对象的操作方法，全部在原型中，自己本身没任何的属性及方法。</p> <ul><li><code>append(key,value)</code> 方法向 <code>formData</code> 添加<code>key/value</code></li> <li><code>delete(key)</code> 方法删除指定的<code>key</code></li> <li><code>entries()</code>  方法返回一个迭代器，允许遍历该对象中包含的所有键/值对</li> <li><code>forEach()</code>  方法遍历<code>formData</code> <code>key/value</code>并执行回调函数</li> <li><code>get(key)</code> 方法获取指定<code>key</code>的值</li> <li><code>getAll(key)</code> 方法获取指定<code>key</code>下边的所有值</li> <li><code>has(key)</code> 方法判断某个<code>key</code>是否存在<code>formData</code>中</li> <li><code>keys()</code> 方法返回一个迭代器，允许遍历该对象中包含的键/值对的所有键</li> <li><code>set(key,value)</code> 在<code>FormData</code>对象中设置一个现有键的新值，或者在不存在的情况下添加键/值</li> <li><code>values()</code> 方法返回一个迭代器，允许遍历该对象中包含的<code>键/值</code>对的所有值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'King'</span><span class="token punctuation">)</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'hong'</span><span class="token punctuation">)</span>

formData<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token comment">// King</span>
formData<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token comment">//[&quot;King&quot;, &quot;hong&quot;]</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/webxiaoma/webxiaoma/edit/dev/docs/javascript/FileReader和FormData对象.md" target="_blank" rel="noopener noreferrer">文章有问题，欢迎提出！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近更新时间: </span> <span class="time">10/9/2018, 6:04:34 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/19.f6bd8cb6.js" defer></script><script src="/assets/js/app.b2ae7260.js" defer></script>
  </body>
</html>
