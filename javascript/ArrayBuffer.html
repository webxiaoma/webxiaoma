<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ArrayBuffer处理二进制 | 马新想个人网站（webxiaoma）</title>
    <meta name="description" content="本文主要讲述js中使用ArrayBuffer对象来处理二进制。">
    <link rel="icon" href="/img/icon.ico">
    <meta name="keywords" content="ArrayBuffer, ArrayBuffer对象, 二进制，js二进制">
    <link rel="preload" href="/assets/css/0.styles.bc69344f.css" as="style"><link rel="preload" href="/assets/js/app.aea542e1.js" as="script"><link rel="preload" href="/assets/js/23.d47b0b69.js" as="script"><link rel="prefetch" href="/assets/js/10.f5f9514d.js"><link rel="prefetch" href="/assets/js/100.407482dd.js"><link rel="prefetch" href="/assets/js/11.9c1a8003.js"><link rel="prefetch" href="/assets/js/12.522ef4c3.js"><link rel="prefetch" href="/assets/js/13.60a9e15b.js"><link rel="prefetch" href="/assets/js/14.9a87f3f5.js"><link rel="prefetch" href="/assets/js/15.a774bda7.js"><link rel="prefetch" href="/assets/js/16.4a1a4ddd.js"><link rel="prefetch" href="/assets/js/17.87f90764.js"><link rel="prefetch" href="/assets/js/18.b6f356fd.js"><link rel="prefetch" href="/assets/js/19.2e553f3f.js"><link rel="prefetch" href="/assets/js/2.24ccb877.js"><link rel="prefetch" href="/assets/js/20.cc6206de.js"><link rel="prefetch" href="/assets/js/21.1145ada4.js"><link rel="prefetch" href="/assets/js/22.7614d293.js"><link rel="prefetch" href="/assets/js/24.d5005c94.js"><link rel="prefetch" href="/assets/js/25.060c45dd.js"><link rel="prefetch" href="/assets/js/26.5bc27874.js"><link rel="prefetch" href="/assets/js/27.801dba33.js"><link rel="prefetch" href="/assets/js/28.f1952670.js"><link rel="prefetch" href="/assets/js/29.30e29aa0.js"><link rel="prefetch" href="/assets/js/3.d2fdc4ac.js"><link rel="prefetch" href="/assets/js/30.5bef05ed.js"><link rel="prefetch" href="/assets/js/31.65072cca.js"><link rel="prefetch" href="/assets/js/32.fd689f04.js"><link rel="prefetch" href="/assets/js/33.2b2668f2.js"><link rel="prefetch" href="/assets/js/34.37d053af.js"><link rel="prefetch" href="/assets/js/35.00070193.js"><link rel="prefetch" href="/assets/js/36.75853770.js"><link rel="prefetch" href="/assets/js/37.4fe8f261.js"><link rel="prefetch" href="/assets/js/38.736e2ed5.js"><link rel="prefetch" href="/assets/js/39.0b5e02bd.js"><link rel="prefetch" href="/assets/js/4.b0a40ac0.js"><link rel="prefetch" href="/assets/js/40.313b1292.js"><link rel="prefetch" href="/assets/js/41.1d86b4ba.js"><link rel="prefetch" href="/assets/js/42.b474c4fd.js"><link rel="prefetch" href="/assets/js/43.c70907dc.js"><link rel="prefetch" href="/assets/js/44.1de2ffad.js"><link rel="prefetch" href="/assets/js/45.18b6d482.js"><link rel="prefetch" href="/assets/js/46.8d1f1b7f.js"><link rel="prefetch" href="/assets/js/47.42f6db5a.js"><link rel="prefetch" href="/assets/js/48.beb91b45.js"><link rel="prefetch" href="/assets/js/49.fe4d8d9e.js"><link rel="prefetch" href="/assets/js/5.6d5aadd9.js"><link rel="prefetch" href="/assets/js/50.e2f0a753.js"><link rel="prefetch" href="/assets/js/51.635d9933.js"><link rel="prefetch" href="/assets/js/52.5c27873e.js"><link rel="prefetch" href="/assets/js/53.c2828b45.js"><link rel="prefetch" href="/assets/js/54.4d51d655.js"><link rel="prefetch" href="/assets/js/55.7d34978c.js"><link rel="prefetch" href="/assets/js/56.21123aed.js"><link rel="prefetch" href="/assets/js/57.a7bfbd87.js"><link rel="prefetch" href="/assets/js/58.41398ef8.js"><link rel="prefetch" href="/assets/js/59.0ec067fd.js"><link rel="prefetch" href="/assets/js/6.75c08909.js"><link rel="prefetch" href="/assets/js/60.eca6468c.js"><link rel="prefetch" href="/assets/js/61.54524630.js"><link rel="prefetch" href="/assets/js/62.75163192.js"><link rel="prefetch" href="/assets/js/63.c76ba3db.js"><link rel="prefetch" href="/assets/js/64.5de30bb9.js"><link rel="prefetch" href="/assets/js/65.482597a1.js"><link rel="prefetch" href="/assets/js/66.6ae9f003.js"><link rel="prefetch" href="/assets/js/67.f16e2fc4.js"><link rel="prefetch" href="/assets/js/68.8fbddd84.js"><link rel="prefetch" href="/assets/js/69.cc0db568.js"><link rel="prefetch" href="/assets/js/7.9a623daa.js"><link rel="prefetch" href="/assets/js/70.5895c4f2.js"><link rel="prefetch" href="/assets/js/71.262b0566.js"><link rel="prefetch" href="/assets/js/72.3f66de64.js"><link rel="prefetch" href="/assets/js/73.60c1c9f2.js"><link rel="prefetch" href="/assets/js/74.a38daf53.js"><link rel="prefetch" href="/assets/js/75.3206ecdc.js"><link rel="prefetch" href="/assets/js/76.6093261f.js"><link rel="prefetch" href="/assets/js/77.2c7436c4.js"><link rel="prefetch" href="/assets/js/78.9cf7c0de.js"><link rel="prefetch" href="/assets/js/79.16ead4fd.js"><link rel="prefetch" href="/assets/js/8.c867ef13.js"><link rel="prefetch" href="/assets/js/80.a11dc90e.js"><link rel="prefetch" href="/assets/js/81.a4661fb4.js"><link rel="prefetch" href="/assets/js/82.0476a95c.js"><link rel="prefetch" href="/assets/js/83.f60f22ee.js"><link rel="prefetch" href="/assets/js/84.c1dc3f97.js"><link rel="prefetch" href="/assets/js/85.66597920.js"><link rel="prefetch" href="/assets/js/86.9f3876d2.js"><link rel="prefetch" href="/assets/js/87.432c6ccb.js"><link rel="prefetch" href="/assets/js/88.609b606f.js"><link rel="prefetch" href="/assets/js/89.01282c92.js"><link rel="prefetch" href="/assets/js/9.621a1f8a.js"><link rel="prefetch" href="/assets/js/90.30640b0d.js"><link rel="prefetch" href="/assets/js/91.750e4f72.js"><link rel="prefetch" href="/assets/js/92.5b565fc6.js"><link rel="prefetch" href="/assets/js/93.be7b6be7.js"><link rel="prefetch" href="/assets/js/94.56610eaa.js"><link rel="prefetch" href="/assets/js/95.cd0164d3.js"><link rel="prefetch" href="/assets/js/96.7dcdff8a.js"><link rel="prefetch" href="/assets/js/97.bc26428c.js"><link rel="prefetch" href="/assets/js/98.01c6ab5b.js"><link rel="prefetch" href="/assets/js/99.4b92fbe3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc69344f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/manong.jpg" alt="马新想" class="logo"> <span class="site-name can-hide">马新想个人网站</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide" data-v-2b50ec5c><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-2b50ec5c><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        前端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          JavaScript
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          JavaScript
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          ECMAScript6
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        设计模式
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          移动端
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          H5页面开发
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          PWA应用
           <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          前端工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Git版本工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        React
         <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        后端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Java
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-2b50ec5c>GitHub</a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        
        <a href="https://github.com/webxiaoma/webxiaoma/issues" target="_blank" style="padding-bottom:5px;" data-v-2b50ec5c>提出疑问</a></li></ul></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar" data-v-5534fc3a><nav class="nav-links" data-v-2b50ec5c data-v-5534fc3a><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-2b50ec5c><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        前端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          JavaScript
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          JavaScript
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          ECMAScript6
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        设计模式
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          移动端
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          H5页面开发
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          PWA应用
           <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          前端工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Git版本工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        React
         <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        后端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Java
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-2b50ec5c>GitHub</a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        
        <a href="https://github.com/webxiaoma/webxiaoma/issues" target="_blank" style="padding-bottom:5px;" data-v-2b50ec5c>提出疑问</a></li></ul></nav>  <ul class="sidebar-links" data-v-5534fc3a><li data-v-5534fc3a><a href="/javascript/" class="sidebar-link" data-v-5534fc3a>网站</a></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>JS常见知识</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>ES6篇</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>音频视频处理</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading open"><span>文件与二进制处理</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/javascript/ArrayBuffer.html" class="active sidebar-link">ArrayBuffer处理二进制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/ArrayBuffer.html#arraybuffer对象" class="sidebar-link">ArrayBuffer对象</a></li><li class="sidebar-sub-header"><a href="/javascript/ArrayBuffer.html#typedarray对象" class="sidebar-link">TypedArray对象</a></li><li class="sidebar-sub-header"><a href="/javascript/ArrayBuffer.html#dataview对象" class="sidebar-link">DataView对象</a></li></ul></li><li><a href="/javascript/Blob.html" class="sidebar-link">Blob处理类文件对象</a></li><li><a href="/javascript/FileReader-FormData.html" class="sidebar-link">FileReader和FormData对象</a></li><li><a href="/javascript/base64.html" class="sidebar-link">base64处理</a></li></ul></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>离线-缓存-存储</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="arraybuffer处理二进制"><a href="#arraybuffer处理二进制" aria-hidden="true" class="header-anchor">#</a> ArrayBuffer处理二进制</h1> <p>来自<a href="http://javascript.ruanyifeng.com/stdlib/arraybuffer.html#" target="_blank" rel="noopener noreferrer">《JavaScript 标准参考教程（alpha）》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，by 阮一峰</p> <hr> <p><code>ArrayBuffer</code>对象、T<code>ypedArray</code>对象、<code>DataView</code>对象是<code>JavaScript</code>操作二进制数据的一个接口。这些对象早就存在，属于独立的规格，ES6将它们纳入了ECMAScript规格，并且增加了新的方法。</p> <p>首先，这个 <code>ArrayBuffer</code> 类型化数组，类型化   数组是<code>JavaScript</code>操作二进制数据的一个接口。最初为了满足<code>JavaScript</code>与显卡之间大量的、实时的数据交换，它们之间的数据通信必须是二进制的，而不能是传统的文本格式。<code>Arraybuffer</code>就是一片内存空间，不能直接引用里面的数据，用户只能通过<code>typedarray</code>类型和<code>dataView</code>类型引用。</p> <ul><li><p><code>ArrayBuffer</code>对象：代表内存之中的一段二进制数据，可以通过“视图”进行操作。“视图”部署了数组接口，这意味着，可以用数组的方法操作内存。</p></li> <li><p><code>TypedArray</code>对象：用来生成内存的视图，通过9个构造函数，可以生成9种数据格式的视图，比如<code>Uint8Array</code>（无符号8位整数）数组视图, Int16Array（16位整数）数组视图, Float32Array（32位浮点数）数组视图等等。</p></li> <li><p><code>DataView</code>对象：用来生成内存的视图，可以自定义格式和字节序，比如第一个字节是<code>Uint8</code>（无符号8位整数）、第二个字节是Int16（16位整数）、第三个字节是Float32（32位浮点数）等等。</p></li></ul> <p>简单说，<code>ArrayBuffer</code>对象代表原始的二进制数据，<code>TypedArray</code>对象代表确定类型的二进制数据，<code>DataView</code>对象代表不确定类型的二进制数据。它们支持的数据类型一共有9种（<code>DataView</code>对象支持除<code>Uint8C</code>以外的其他8种）。</p> <h2 id="arraybuffer对象"><a href="#arraybuffer对象" aria-hidden="true" class="header-anchor">#</a> <code>ArrayBuffer</code>对象</h2> <p><code>ArrayBuffer</code>对象代表储存二进制数据的一段内存，它不能直接读写，只能通过视图（<code>T</code>ypedArray<code>视图和</code>DataView`视图)来读写，视图的作用是以指定格式解读二进制数据。</p> <ul><li><strong>创建 <code>ArrayBuffer</code></strong></li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">let</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token comment">// 生成了一个32字节的内存区域，每个字节默认为0</span>

</code></pre></div><ul><li><strong>读取 <code>ArrayBuffer</code></strong></li></ul> <p>读取<code>ArrayBuffer</code> 我们上边提了有两种方式：</p> <p>第一种方式通过 <code>DataView</code> 视图读取</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> dataView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
dataView<span class="token punctuation">.</span><span class="token function">getUnt8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">// 建立DataView视图，然后以不带符号的8位整数格式，读取第一个元素</span>
</code></pre></div><p>第二种方式通过 <code>TypeArray</code> 视图,与DataView视图的一个区别是，它不是一个构造函数，而是一组构造函数，代表不同的数据格式。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> int32 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
<span class="token keyword">let</span> uint8 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>int32<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uint8<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>

<span class="token comment">// 还可以直接修改</span>
int32<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>int32<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uint8<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><p>上面代码对同一段内存，分别建立两种视图：32位带符号整数（Int32Array构造函数）和8位不带符号整数（Uint8Array构造函数）。由于两个视图对应的是同一段内存，一个视图修改底层内存，会影响到另一个视图。</p> <ul><li><strong><code>ArrayBuffer</code>的其它属性方法</strong></li></ul> <blockquote><p><code>ArrayBuffer.prototype.byteLength</code> 返回所分配的内存区域的字节长度。
<code>ArrayBuffer.prototype.slice(start,len)</code> 允许将内存区域的一部分，拷贝生成一个新的ArrayBuffer对象,并返回，start 为开始看吧的位置，len为拷贝长度
<code>ArrayBuffer.isView()</code> 返回一个布尔值，表示参数是否为ArrayBuffer的视图实例(也就是是否为是否为TypedArray实例或DataView实例)</p></blockquote> <h2 id="typedarray对象"><a href="#typedarray对象" aria-hidden="true" class="header-anchor">#</a> <code>TypedArray对象</code></h2> <p><code>ArrayBuffer</code>对象作为内存区域，可以存放多种类型的数据。同一段内存，不同数据有不同的解读方式，这就叫做“视图”（view）。<code>ArrayBuffer</code>有两种视图，一种是<code>TypedArray</code>视图，另一种是<code>DataView</code>视图，两者的区别主要是字节序，前者的数组成员都是同一个数据类型，后者的数组成员可以是不同的数据类型。</p> <ul><li><strong><code>TypedArray对象</code>提供的视图</strong></li></ul> <p>目前，TypedArray对象一共提供9种类型的视图，每一种视图都是一种构造函数。</p> <table><thead><tr><th>视图函数</th> <th>说明</th></tr></thead> <tbody><tr><td>Int8Array</td> <td>8位有符号整数，长度1个字节</td></tr> <tr><td>Uint8Array</td> <td>8位无符号整数，长度1个字节</td></tr> <tr><td>Uint8ClampedArray</td> <td>位无符号整数，长度1个字节，溢出处理不同</td></tr> <tr><td>Int16Array</td> <td>16位有符号整数，长度2个字</td></tr> <tr><td>Uint16Array</td> <td>16位无符号整数，长度2个字节</td></tr> <tr><td>Int32Array</td> <td>32位有符号整数，长度4个字节</td></tr> <tr><td>Uint32Array</td> <td>32位无符号整数，长度4个字节</td></tr> <tr><td>Float32Array</td> <td>32位浮点数，长度4个字节</td></tr> <tr><td>Float64Array</td> <td>64位浮点数，长度8个字节</td></tr></tbody></table> <p>这9个构造函数生成的对象，统称为<code>TypedArray</code>对象。它们很像正常数组，都有length属性，都能用方括号运算符（[]）获取单个元素，所有数组的方法，在类型化数组上面都能使用。两者的差异主要在以下方面。</p> <ul><li><code>TypedArray</code>数组的所有成员，都是同一种类型和格式。</li> <li><code>TypedArray</code>数组的成员是连续的，不会有空位。</li> <li><code>Typed</code>化数组成员的默认值为0。比如，<code>new Array(10)</code>返回一个正常数组，里面没有任何成员，只是10个空位；<code>new Uint8Array(10)</code>返回一个类型化数组，里面10个成员都是0。</li> <li><code>TypedArray</code>数组只是一层视图，本身不储存数据，它的数据都储存在底层的<code>ArrayBuffer</code>对象之中，要获取底层对象必须使用buffer属性。</li> <li><strong><code>TypedArray</code> 提供的9中构造函数的用法</strong></li></ul> <ol><li><code>TypedArray(buffer, byteOffset=0, length?)</code></li></ol> <p>buffer为底层ArrayBuffer,byteOffset为开始字节序号默认为0，length为长度默认直到本段内存区域结束</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 创建一个8字节的ArrayBuffer</span>
<span class="token keyword">let</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个指向b的Int32视图，开始于字节0，直到缓冲区的末尾</span>
<span class="token keyword">let</span> typedAry1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>

<span class="token comment">//创建一个指向b的Uint8视图，开始于字节2，直到缓冲区的末尾</span>
<span class="token keyword">let</span> typedAry2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uin8Array</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个指向b的Int16视图，开始于字节2，长度为2</span>
<span class="token keyword">let</span> typedAry2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int16Array</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>需要注意的是：byteOffset必须与所要建立的数据类型一致（也就是创建的内存数据字节数要是其视图规定的整数倍），否则会报错</p> <ol start="2"><li><code>TypedArray(ArrayObj)</code> 视图还可以不通过ArrayBuffer对象，直接分配内存而生成</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 直接写长度，创建一个有八个成员的 32位有符号整数数组（共32个字节）</span>
<span class="token keyword">let</span> typedAry1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>

<span class="token comment">// 类型化数组的构造函数，可以接受另一个视图实例作为参数。</span>
<span class="token keyword">let</span> typedArray2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int8Array</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 构造函数的参数也可以是一个普通数组，然后直接生成TypedArray实例。</span>
<span class="token keyword">let</span> typedArray3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>TypedArray数组也可以转换回普通数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> normalArray <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>typedArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>TypedArray 的其它方法与属性</strong></li></ul> <p>-<code>TypedArray.prototype.buffer</code> 返回整段内存区域对应的`ArrayBuffer对象。该属性为只读属性</p> <ul><li><code>TypedArray.prototype.byteLength</code> byteLength属性返回<code>TypedArray</code>数组占据的内存长度，单位为字节(只读)</li> <li><code>ypedArray.prototype.byteOffset</code> byteOffset属性返回<code>TypedArray</code>数组从底层<code>ArrayBuffer</code>对象的哪个字节开始(只读)</li> <li><code>TypedArray.prototype.length</code>  length属性表示<code>TypedArray</code>数组含有多少个成员。注意将<code>byteLength</code>属性和length属性区分，前者是字节长度，后者是成员长度。</li> <li><code>TypedArray.prototype.set()</code> TypedArray数组的set方法用于复制数组（正常数组或TypedArray数组），也就是将一段内容完全复制到另一段内存。</li> <li><code>TypedArray.prototype.subarray(start,end)</code> subarray方法是对于<code>TypedArray</code>数组的一部分，再建立一个新的视图。</li> <li><code>TypedArray.prototype.slice()</code>  TypeArray实例的<code>slice</code>方法，可以返回一个指定位置的新的<code>TypedArray</code>实例。</li> <li><code>TypedArray.of()</code> ypedArray数组的所有构造函数，都有一个静态方法of，用于将参数转为一个<code>TypedArray</code>实例。</li> <li><code>TypedArray.from()</code> 静态方法from接受一个可遍历的数据结构（比如数组）作为参数，返回一个基于这个结构的TypedArray实例。</li></ul> <h2 id="dataview对象"><a href="#dataview对象" aria-hidden="true" class="header-anchor">#</a> <code>DataView对象</code></h2> <p>如果一段数据包括多种类型（比如服务器传来的HTTP数据），这时除了建立<code>ArrayBuffer</code>对象的复合视图以外，还可以通过<code>DataView</code>视图进行操作。</p> <p><code>DataView</code>视图提供更多操作选项，而且支持设定字节序。本来，在设计目的上，<code>ArrayBuffer</code>对<code>象的各种</code>TypedArray<code>视图，是用来向网卡、声卡之类的本机设备传送数据，所以使用本机的字节序就可以了；而</code>DataView`视图的设计目的，是用来处理网络设备传来的数据，所以大端字节序或小端字节序是可以自行设定的。</p> <p><code>DataView</code>视图本身也是构造函数，接受一个<code>ArrayBuffer</code>对象作为参数，生成视图。</p> <p><strong>1. 使用方法</strong></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">let</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> dv <span class="token operator">=</span> <span class="token keyword">new</span>  <span class="token class-name">DataView</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span>
</code></pre></div><p><strong>2.DataView实例提供8个方法读取内存。</strong></p> <ul><li><code>getInt8</code>：读取1个字节，返回一个8位整数。</li> <li><code>getUint8</code>：读取1个字节，返回一个无符号的8位整数。</li> <li><code>getInt16</code>：读取2个字节，返回一个16位整数。</li> <li><code>getUint16</code>：读取2个字节，返回一个无符号的16位整数。</li> <li><code>getInt32</code>：读取4个字节，返回一个32位整数。</li> <li><code>getUint32</code>：读取4个字节，返回一个无符号的32位整数。</li> <li><code>getFloat32</code>：读取4个字节，返回一个32位浮点数。</li> <li><code>getFloat64</code>：读取8个字节，返回一个64位浮点数。</li></ul> <p>这一系列get方法的参数都是一个字节序号（不能是负数，否则会报错），表示从哪个字节开始读取。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> dv <span class="token operator">=</span> <span class="token keyword">new</span>  <span class="token class-name">DataView</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span>

<span class="token comment">// 从第1个字节读取一个8位无符号整数</span>
<span class="token keyword">var</span> v1 <span class="token operator">=</span> dv<span class="token punctuation">.</span><span class="token function">getUint8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从第2个字节读取一个16位无符号整数</span>
<span class="token keyword">var</span> v2 <span class="token operator">=</span> dv<span class="token punctuation">.</span><span class="token function">getUint16</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从第4个字节读取一个16位无符号整数</span>
<span class="token keyword">var</span> v3 <span class="token operator">=</span> dv<span class="token punctuation">.</span><span class="token function">getUint16</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码读取了<code>ArrayBuffer</code>对象的前5个字节，其中有一个8位整数和两个十六位整数。</p> <p>如果一次读取两个或两个以上字节，就必须明确数据的存储方式，到底是小端字节序还是大端字节序。默认情况下，DataView的get方法使用大端字节序解读数据，如果需要使用小端字节序解读，必须在get方法的第二个参数指定true。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 小端字节序</span>
<span class="token keyword">var</span> v1 <span class="token operator">=</span> dv<span class="token punctuation">.</span><span class="token function">getUint16</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 大端字节序</span>
<span class="token keyword">var</span> v2 <span class="token operator">=</span> dv<span class="token punctuation">.</span><span class="token function">getUint16</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 大端字节序 默认</span>
<span class="token keyword">var</span> v3 <span class="token operator">=</span> dv<span class="token punctuation">.</span><span class="token function">getUint16</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>2.DataView视图提供8个方法写入内存。</strong></p> <ul><li><code>setInt8</code>：写入1个字节的8位整数。</li> <li><code>setUint8</code>：写入1个字节的8位无符号整数。</li> <li><code>setInt16</code>：写入2个字节的16位整数。</li> <li><code>setUint16</code>：写入2个字节的16位无符号整数。</li> <li><code>setInt32</code>：写入4个字节的32位整数。</li> <li><code>setUint32</code>：写入4个字节的32位无符号整数。</li> <li><code>setFloat32</code>：写入4个字节的32位浮点数。</li> <li><code>setFloat64</code>：写入8个字节的64位浮点数。</li></ul> <p>这一系列<code>set</code>方法，接受两个参数，第一个参数是字节序号，表示从哪个字节开始写入，第二个参数为写入的数据。对于那些写入两个或两个以上字节的方法，需要指定第三个参数，false或者undefined表示使用大端字节序写入，true表示使用小端字节序写入。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 在第1个字节，以大端字节序写入值为25的32位整数</span>
dv<span class="token punctuation">.</span><span class="token function">setInt32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在第5个字节，以大端字节序写入值为25的32位整数</span>
dv<span class="token punctuation">.</span><span class="token function">setInt32</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在第9个字节，以小端字节序写入值为2.5的32位浮点数</span>
dv<span class="token punctuation">.</span><span class="token function">setFloat32</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/webxiaoma/webxiaoma/edit/dev/docs/javascript/ArrayBuffer.md" target="_blank" rel="noopener noreferrer">文章有问题，欢迎提出！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/javascript/video.html" class="prev">
          H5视频处理
        </a></span> <span class="next"><a href="/javascript/Blob.html">
          Blob处理类文件对象
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/23.d47b0b69.js" defer></script><script src="/assets/js/app.aea542e1.js" defer></script>
  </body>
</html>
