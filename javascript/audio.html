<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>H5音频处理 | 马新想个人网站（webxiaoma）</title>
    <meta name="description" content="本文章主要总结H5中的音频处理知识。">
    <link rel="icon" href="/img/icon.ico">
    <meta name="keywords" content="H5音频处理 audio h5 audio js音频">
    <link rel="preload" href="/assets/css/0.styles.bc69344f.css" as="style"><link rel="preload" href="/assets/js/app.2dd5823d.js" as="script"><link rel="preload" href="/assets/js/27.cb2bdcbb.js" as="script"><link rel="prefetch" href="/assets/js/10.115f0e9f.js"><link rel="prefetch" href="/assets/js/100.a5f35625.js"><link rel="prefetch" href="/assets/js/101.3f7da60f.js"><link rel="prefetch" href="/assets/js/11.ca95da95.js"><link rel="prefetch" href="/assets/js/12.0d6f53eb.js"><link rel="prefetch" href="/assets/js/13.11e8bf42.js"><link rel="prefetch" href="/assets/js/14.b6fb92db.js"><link rel="prefetch" href="/assets/js/15.d99d902d.js"><link rel="prefetch" href="/assets/js/16.82e5e1d5.js"><link rel="prefetch" href="/assets/js/17.b71d894b.js"><link rel="prefetch" href="/assets/js/18.2364c8b4.js"><link rel="prefetch" href="/assets/js/19.071bb0cb.js"><link rel="prefetch" href="/assets/js/2.24ccb877.js"><link rel="prefetch" href="/assets/js/20.cc6206de.js"><link rel="prefetch" href="/assets/js/21.8961837c.js"><link rel="prefetch" href="/assets/js/22.437652a5.js"><link rel="prefetch" href="/assets/js/23.03b0d5f2.js"><link rel="prefetch" href="/assets/js/24.cd348fcb.js"><link rel="prefetch" href="/assets/js/25.4135cbef.js"><link rel="prefetch" href="/assets/js/26.2bb0b2dc.js"><link rel="prefetch" href="/assets/js/28.2e248289.js"><link rel="prefetch" href="/assets/js/29.da8a4af8.js"><link rel="prefetch" href="/assets/js/3.1536257e.js"><link rel="prefetch" href="/assets/js/30.df56f2b3.js"><link rel="prefetch" href="/assets/js/31.79ee29a8.js"><link rel="prefetch" href="/assets/js/32.70066a29.js"><link rel="prefetch" href="/assets/js/33.b21c89f4.js"><link rel="prefetch" href="/assets/js/34.f7579b71.js"><link rel="prefetch" href="/assets/js/35.c50b11c9.js"><link rel="prefetch" href="/assets/js/36.5c16d9ef.js"><link rel="prefetch" href="/assets/js/37.afbecdfd.js"><link rel="prefetch" href="/assets/js/38.b2024092.js"><link rel="prefetch" href="/assets/js/39.97043731.js"><link rel="prefetch" href="/assets/js/4.cf9ee35d.js"><link rel="prefetch" href="/assets/js/40.a949475b.js"><link rel="prefetch" href="/assets/js/41.9a71b12b.js"><link rel="prefetch" href="/assets/js/42.3b0d7772.js"><link rel="prefetch" href="/assets/js/43.cd028af7.js"><link rel="prefetch" href="/assets/js/44.b4c83bce.js"><link rel="prefetch" href="/assets/js/45.fc5c2951.js"><link rel="prefetch" href="/assets/js/46.1bcb7100.js"><link rel="prefetch" href="/assets/js/47.bf2d8d14.js"><link rel="prefetch" href="/assets/js/48.d090625c.js"><link rel="prefetch" href="/assets/js/49.5c25006c.js"><link rel="prefetch" href="/assets/js/5.af9fa804.js"><link rel="prefetch" href="/assets/js/50.71aef2a3.js"><link rel="prefetch" href="/assets/js/51.9b9ae7fc.js"><link rel="prefetch" href="/assets/js/52.9aabccbc.js"><link rel="prefetch" href="/assets/js/53.3b7b4ceb.js"><link rel="prefetch" href="/assets/js/54.84ae20c4.js"><link rel="prefetch" href="/assets/js/55.4981594d.js"><link rel="prefetch" href="/assets/js/56.398814c2.js"><link rel="prefetch" href="/assets/js/57.30748d95.js"><link rel="prefetch" href="/assets/js/58.a3584fd0.js"><link rel="prefetch" href="/assets/js/59.2c5ef064.js"><link rel="prefetch" href="/assets/js/6.f1e6bc61.js"><link rel="prefetch" href="/assets/js/60.3f5c05a1.js"><link rel="prefetch" href="/assets/js/61.38ca74b7.js"><link rel="prefetch" href="/assets/js/62.3c23bfb9.js"><link rel="prefetch" href="/assets/js/63.f2ebbefd.js"><link rel="prefetch" href="/assets/js/64.39be2239.js"><link rel="prefetch" href="/assets/js/65.2665b5cd.js"><link rel="prefetch" href="/assets/js/66.3498370f.js"><link rel="prefetch" href="/assets/js/67.8ea2d57a.js"><link rel="prefetch" href="/assets/js/68.93e8749d.js"><link rel="prefetch" href="/assets/js/69.bdbf34bb.js"><link rel="prefetch" href="/assets/js/7.20a66dc3.js"><link rel="prefetch" href="/assets/js/70.e02cdb54.js"><link rel="prefetch" href="/assets/js/71.3b530e90.js"><link rel="prefetch" href="/assets/js/72.82441c75.js"><link rel="prefetch" href="/assets/js/73.24533226.js"><link rel="prefetch" href="/assets/js/74.1ebbe74d.js"><link rel="prefetch" href="/assets/js/75.c3acc4ea.js"><link rel="prefetch" href="/assets/js/76.187e9a33.js"><link rel="prefetch" href="/assets/js/77.b525927c.js"><link rel="prefetch" href="/assets/js/78.cd5dd2bd.js"><link rel="prefetch" href="/assets/js/79.fdaa87ab.js"><link rel="prefetch" href="/assets/js/8.eb5c90ec.js"><link rel="prefetch" href="/assets/js/80.68506105.js"><link rel="prefetch" href="/assets/js/81.54205dcc.js"><link rel="prefetch" href="/assets/js/82.983796c5.js"><link rel="prefetch" href="/assets/js/83.67ba2d77.js"><link rel="prefetch" href="/assets/js/84.e5ed0a75.js"><link rel="prefetch" href="/assets/js/85.f0c5f39c.js"><link rel="prefetch" href="/assets/js/86.3d8a5433.js"><link rel="prefetch" href="/assets/js/87.83039dba.js"><link rel="prefetch" href="/assets/js/88.73a089e5.js"><link rel="prefetch" href="/assets/js/89.62ae4d79.js"><link rel="prefetch" href="/assets/js/9.abbf13b4.js"><link rel="prefetch" href="/assets/js/90.05efbbb7.js"><link rel="prefetch" href="/assets/js/91.c2902fb1.js"><link rel="prefetch" href="/assets/js/92.f0543f38.js"><link rel="prefetch" href="/assets/js/93.ea5fd3c7.js"><link rel="prefetch" href="/assets/js/94.8da51b35.js"><link rel="prefetch" href="/assets/js/95.3d2c8931.js"><link rel="prefetch" href="/assets/js/96.31b375e3.js"><link rel="prefetch" href="/assets/js/97.25bc440e.js"><link rel="prefetch" href="/assets/js/98.6eee89d4.js"><link rel="prefetch" href="/assets/js/99.ff860369.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc69344f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/manong.jpg" alt="马新想" class="logo"> <span class="site-name can-hide">马新想个人网站</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide" data-v-2b50ec5c><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-2b50ec5c><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        前端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          JavaScript
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          JavaScript
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          ECMAScript6
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        设计模式
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          移动端
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          H5页面开发
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          PWA应用
           <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          前端工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Git版本工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        React
         <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        后端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Java
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-2b50ec5c>GitHub</a></li></ul></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar" data-v-5534fc3a><nav class="nav-links" data-v-2b50ec5c data-v-5534fc3a><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-2b50ec5c><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        前端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          JavaScript
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          JavaScript
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          ECMAScript6
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        设计模式
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          移动端
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          H5页面开发
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          PWA应用
           <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          前端工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
          Git版本工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        React
         <!----></li></ul></div></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-2b50ec5c><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        后端
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        Java
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-2b50ec5c>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-2b50ec5c>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-2b50ec5c>GitHub</a></li></ul></nav>  <ul class="sidebar-links" data-v-5534fc3a><li data-v-5534fc3a><a href="/javascript/" class="sidebar-link" data-v-5534fc3a>网站</a></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>JS常见知识</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>ES6篇</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading open"><span>音频视频处理</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/javascript/audio.html" class="active sidebar-link">H5音频处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/audio.html#audio标签" class="sidebar-link">Audio标签</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/audio.html#使用该标签" class="sidebar-link">使用该标签</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#audio标签内属性" class="sidebar-link">audio标签内属性</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#audio对象属性" class="sidebar-link">audio对象属性</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#audio-对像方法" class="sidebar-link">audio 对像方法</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#多媒体事件" class="sidebar-link">多媒体事件</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#实例练习" class="sidebar-link">实例练习</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#audio-web-api" class="sidebar-link">Audio Web API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/audio.html#认识audio-web-api" class="sidebar-link">认识Audio Web API</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#web-audio流程" class="sidebar-link">Web Audio流程</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#创建音频上下文" class="sidebar-link">创建音频上下文</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#处理音效" class="sidebar-link">处理音效</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#处理音量" class="sidebar-link">处理音量</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#开始暂停" class="sidebar-link">开始暂停</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#获取频率信息" class="sidebar-link">获取频率信息</a></li><li class="sidebar-sub-header"><a href="/javascript/audio.html#实例练习-2" class="sidebar-link">实例练习</a></li></ul></li></ul></li><li><a href="/javascript/video.html" class="sidebar-link">H5视频处理</a></li></ul></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>文件与二进制处理</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>离线-缓存-存储</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="h5音频处理"><a href="#h5音频处理" aria-hidden="true" class="header-anchor">#</a> H5音频处理</h1> <p><a href="https://github.com/webxiaoma/JavaScript-demos/tree/master/HTML5/audio" target="_blank" rel="noopener noreferrer">GitHub 练习仓库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="audio标签"><a href="#audio标签" aria-hidden="true" class="header-anchor">#</a> Audio标签</h2> <p><code>H5</code>中提供了一个<code>Audio</code>标签来引入音频资源,他的使用也非常的简单,在学习<code>Audio</code>标签之前可以看一下<a href="https://caniuse.com/#search=audio" target="_blank" rel="noopener noreferrer">Auido 标签的兼容性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="使用该标签"><a href="#使用该标签" aria-hidden="true" class="header-anchor">#</a> 使用该标签</h3> <p>使用<code>Audio</code>标签很简单</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>audio</span> <span class="token attr-name">controls</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://sc1.111ttt.cn/2018/1/03/13/396131227447.mp3<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    您的浏览器不支持 audio 元素。
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>audio</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当浏览器不支持<code>audio</code>时，页面会像是<code>audio</code>内的文字。目前audio支持的音频格式<code>ogg vorbis</code> 、<code>MP3</code>以及<code>wav</code>。这三种格式浏览器的兼容性可以<a href="http://www.w3school.com.cn/html5/html_5_audio.asp" target="_blank" rel="noopener noreferrer">查看这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="audio标签内属性"><a href="#audio标签内属性" aria-hidden="true" class="header-anchor">#</a> audio标签内属性</h3> <ul><li><code>autoplay</code>音频在就绪后马上播放。</li> <li><code>controls</code>如向用户显示控件，比如播放按钮。</li> <li><code>loop</code>每当音频结束时重新开始播放。</li> <li><code>preload</code>	音频在页面加载时进行加载，并预备播放。如果使用 &quot;autoplay&quot;，则忽略该属性。</li> <li><code>src</code>	要播放的音频的 URL。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 自动播放 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>audio</span> <span class="token attr-name">autoplay</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://sc1.111ttt.cn/2018/1/03/13/396131227447.mp3<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    您的浏览器不支持 audio 元素。
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>audio</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="audio对象属性"><a href="#audio对象属性" aria-hidden="true" class="header-anchor">#</a> audio对象属性</h3> <p>除了上边标签中内嵌的属性，还有以下属性<a href="http://www.w3school.com.cn/jsref/dom_obj_audio.asp" target="_blank" rel="noopener noreferrer">更多对像属性查看这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <ul><li><code>volume</code> 设置或返回音频的音量。</li> <li><code>paused</code> 设置或返回音频是否暂停。</li> <li><code>currentTime</code> 设置或返回音频中的当前播放位置（以秒计）。</li> <li><code>currentSrc</code> 返回当前音频的 URL。</li> <li><code>defaultMuted</code> 设置或返回音频默认是否静音。</li> <li><code>defaultPlaybackRate</code> 设置或返回音频的默认播放速度。</li> <li><code>duration</code> 返回音频的长度（以秒计）。</li> <li><code>muted</code> 	设置或返回是否关闭声音。</li> <li><code>playbackRate</code> 设置或返回音频播放的速度。</li> <li><code>ended</code> 返回音频的播放是否已结束。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例子</span>
<span class="token keyword">let</span> audio <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'audio'</span><span class="token punctuation">)</span>
audio<span class="token punctuation">.</span>volume <span class="token operator">=</span> <span class="token number">.5</span><span class="token punctuation">;</span> <span class="token comment">// 设置音量</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>audio<span class="token punctuation">.</span>currentSrc<span class="token punctuation">)</span> <span class="token comment">//前音频的 URL</span>
</code></pre></div><h3 id="audio-对像方法"><a href="#audio-对像方法" aria-hidden="true" class="header-anchor">#</a> audio 对像方法</h3> <ul><li><code>addTextTrack()</code>	向音频添加新的文本轨道。</li> <li><code>canPlayType()</code>	检查浏览器是否能够播放指定的音频类型。</li> <li><code>fastSeek()</code>	在音频播放器中指定播放时间。</li> <li><code>getStartDate()</code>	返回新的 Date 对象，表示当前时间线偏移量。</li> <li><code>load()</code>	重新加载音频元素。</li> <li><code>play()</code>	开始播放音频。</li> <li><code>pause()</code>	暂停当前播放的音频。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例子</span>
<span class="token keyword">let</span> audio <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'audio'</span><span class="token punctuation">)</span>
audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开始播放</span>
</code></pre></div><h3 id="多媒体事件"><a href="#多媒体事件" aria-hidden="true" class="header-anchor">#</a> 多媒体事件</h3> <p>多媒体事件不单单用着音频上，也可以用在视频上，跟多多媒体事件<a href="http://www.w3school.com.cn/html5/html5_ref_eventattributes.asp" target="_blank" rel="noopener noreferrer">可以看这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li><code>onplay</code> 当媒介数据将要开始播放时运行脚本</li> <li><code>onratechange</code> 当媒介数据的播放速率改变时运行脚本</li> <li><code>onended</code> 当媒介已抵达结尾时运行脚本</li> <li><code>ontimeupdate</code> 当媒介改变其播放位置时运行脚本</li> <li><code>onvolumechange</code> 当媒介改变音量亦或当音量被设置为静音时运行脚本</li> <li><code>onwaiting</code> 当媒介已停止播放但打算继续播放时运行脚本</li> <li><code>onloadstart</code> 当浏览器开始加载媒介数据时运行脚本</li></ul> <h3 id="实例练习"><a href="#实例练习" aria-hidden="true" class="header-anchor">#</a> 实例练习</h3> <p>下面我们来看看使用<code>audio</code>的一些小练习<a href="https://github.com/webxiaoma/JavaScript-demos/blob/master/HTML5/audio/audio.html" target="_blank" rel="noopener noreferrer">GitHub仓库练习<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <iframe width="700" height="500" src="https://webxiaoma.github.io/JavaScript-demos/HTML5/audio/audio.html" style="border:0;"></iframe> <h2 id="audio-web-api"><a href="#audio-web-api" aria-hidden="true" class="header-anchor">#</a> Audio Web API</h2> <p><code>Audio Web API</code> 是<code>h5</code>提供的一些处理音频的接口，它和<code>audio</code>标签并不是同样的东西。只不过<code>audio</code>底层用到了一些<code>Audio Web API</code>, <code>Audio Web API</code>提供了非常多的接口，这里我们只讲解部分，目的是了解一下该功能，如果你想深入研究可以查看<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API#" target="_blank" rel="noopener noreferrer">Web Audio API MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，另外你可以<a href="https://caniuse.com/#search=Audio%20API" target="_blank" rel="noopener noreferrer">点击这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>查看<code>Audio Web API</code> 目前的兼容性。</p> <h3 id="认识audio-web-api"><a href="#认识audio-web-api" aria-hidden="true" class="header-anchor">#</a> 认识Audio Web API</h3> <p><code>Audio Web API</code>和h5 <code>audio</code> 标签的最大区别就是它不需要任何的音频文件，凭借js代码就可以产生声音，并且可以获取音频进行处理，除此之外还可以做这些：</p> <ul><li>处理音效，如实现混音，低音，颗粒音效</li> <li>控制音频的音量</li> <li>实现音乐的分割截取</li> <li>制作3D游戏音效</li></ul> <p>等等，类似音频编辑类的软件功能。</p> <h3 id="web-audio流程"><a href="#web-audio流程" aria-hidden="true" class="header-anchor">#</a> Web Audio流程</h3> <p>一个简单的<code>Web Audio</code>流程大致如下</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ol><li>创建音频上下文</li> <li>在音频上下文里创建源 — 例如 <code>&lt;audio&gt;</code>, 振荡器, 流</li> <li>创建效果节点，例如混响、双二阶滤波器、平移、压缩</li> <li>为音频选择一个目地，例如你的系统扬声器</li> <li>连接源到效果器，对目的地进行效果输出</li></ol></div> <h3 id="创建音频上下文"><a href="#创建音频上下文" aria-hidden="true" class="header-anchor">#</a> 创建音频上下文</h3> <p><code>AudioContext</code>会生成一个音频上下文，我们的所有音频操作都是在这个上下文上去进行的，它类似与<code>canvas</code>中的<code>canvas.getContext</code>。这个上下文上有很多的属性，常见的属性方法如下： 更多属性方法<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext" target="_blank" rel="noopener noreferrer">AudioContext
<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>属性：</strong></p> <ul><li><code>AudioContext.currentTime</code> 返回硬件调用的秒数，<code>AudioContext</code>一创建就从0开始走，无法停掉、暂停或者重置。</li> <li><code>AudioContext.listener</code> 返回<code>AudioListener</code>对象，用于3D音频空间化。</li> <li><code>AudioContext.destination</code> 返回<code>AudioDestinationNode</code>对象，表示当前<code>audio context</code>中所有节点的最终节点，一般表示音频渲染设备。</li></ul> <p><strong>方法：</strong></p> <ul><li><code>AudioContext.createOscillator()</code> 创建一个振荡器（音调调节器）</li> <li><code>AudioContext.createMediaElementSource()</code> 创建一个接口处理<code>&lt;audio&gt;</code> 或<code>&lt;video&gt;</code> 元素的音频</li> <li><code>AudioContext.createMediaStreamSource()</code> 创建一个接口处理摄像头或麦克风的音频</li> <li><code>AudioContext.createBuffer()</code>创建一个空的<code>AudioBuffer</code>对象, 并且能够通过<code>AudioBufferSourceNode</code>来进行数据填充和播放.</li> <li><code>AudioContext.createBufferSource()</code>创建一个 <code>AudioBufferSourceNode</code> 对象, 他可以通过<code>AudioBuffer</code>对象来播放和处理包含在内的音频数据. <code>AudioBuffer</code>可以通过<code>AudioContext.createBuffer</code>方法创建或者使用<code>AudioContext.decodeAudioData</code>方法解码音轨来创建。</li> <li><code>AudioContext.createGain()</code> 创建一个<code>GainNode</code>,它可以控制音频的总音量</li> <li><code>AudioContext.createAnalyser()</code> 返回音频时间和频率数据，可用在数据可视化上</li> <li><code>AudioContext.close()</code> 关闭一个音频环境, 释放任何正在使用系统资源的音频。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建音频上下文</span>
<span class="token keyword">var</span> audioContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="处理音效"><a href="#处理音效" aria-hidden="true" class="header-anchor">#</a> 处理音效</h3> <p>处理音效我们需要创建一个音频振荡器<code>createOscillator()</code>，它返回一个<code>OscillatorNode</code>模块对象接口(音调控制对象)，这个模块会对一个指定频率将创建的给定波产生影响, 一个恒定的音调。具体用法<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/OscillatorNode" target="_blank" rel="noopener noreferrer">可以看这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>属性：</strong></p> <ul><li><code>OscillatorNode.frequency</code> 存储振动频率信息，可以通过</li> <li><code>OscillatorNode.frequency.value = 100</code> 来设置频率（单为赫兹）</li> <li><code>OscillatorNode.detune</code>振动的音高微调单位是cent音分）默认值是0。</li> <li><code>OscillatorNode.type</code>一个字符串设置波形，决定 <code>OscillatorNode</code> 播放的声音的周期波形; 它的值可以是基础值中的一个或者用户使用 <code>PeriodicWave</code>。不同的波形可以产生不同的声调。 基础值有 &quot;sine&quot;, &quot;square&quot;, &quot;sawtooth&quot;, &quot;triangle&quot; and &quot;custom&quot;. 默认值是&quot;sine&quot;。默认的波形有如下（图片来自<a href="https://www.zhangxinxu.com/wordpress/2017/06/html5-web-audio-api-js-ux-voice/" target="_blank" rel="noopener noreferrer">张鑫旭<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</li></ul> <p><img src="http://webxiaoma/img/audio.png" alt></p> <p><strong>方法：</strong></p> <ul><li><code>OscillatorNode.setPeriodicWave()</code>设置一个<code>PeriodicWave</code> ,它描述了一个周期的波形常常替代标准波形之一; 调用这个方法来设置用户自定义的波形。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建振荡器</span>
<span class="token keyword">var</span> oscillator <span class="token operator">=</span> audioContext<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="处理音量"><a href="#处理音量" aria-hidden="true" class="header-anchor">#</a> 处理音量</h3> <p>处理声音我们需要使用<code>AudioContext.createGain()</code>，该方法返回一个<code>GainNode</code>对象。该方法常用的属性和方法如下：更多方法访问<a href="https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createGain" target="_blank" rel="noopener noreferrer">createGain api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>属性</strong></p> <ul><li><code>ainNode.gain</code> 一个<code>a-rate</code>类型的<a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noopener noreferrer">AudioParam<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，该属性下面有很多处理音量的方法和属性</li></ul> <p><strong>方法</strong></p> <p>很多在<code>gain</code>属性上，更多方法访问<a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noopener noreferrer">AudioParam<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li><code>gainNode.gain.setValueAtTime(0, audioContext.currentTime)</code> 将当前音量设置为0</li> <li><code>gainNode.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.01)</code> 0.01秒时间内音量从刚刚的0变成0.5，线性变化(声音会淡入淡出的感觉)</li> <li><code>gainNode.gain.exponentialRampToValueAtTime(0.01 , audioCtx.currentTime + 1)</code> 1秒内将声音降低到 0.01</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建音量器</span>
<span class="token keyword">var</span> gainNode <span class="token operator">=</span> audioContext<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="开始暂停"><a href="#开始暂停" aria-hidden="true" class="header-anchor">#</a> 开始暂停</h3> <p>想要实现最简单的声音合成我们还要使用下面方法：</p> <ul><li><code>oscillator.connect(gainNode)</code> 音调和音量关联起来，使用<code>disconnect</code>可以断开连接</li> <li><code>gainNode.connect(AudioContext.destination)</code> 音量和设备关联起来，使用<code>disconnect</code>可以断开连接</li> <li><code>oscillator.start(AudioContext.currentTime)</code> 播放音频</li> <li><code>oscillator.stop(AudioContext.currentTime + 1)</code> 1秒后暂停播放</li></ul> <p>下面我们就可以实现一个很简单的音频：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//创建音频接口上下文</span>
<span class="token keyword">var</span> audioCtx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>AudioContext <span class="token operator">||</span> webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建音调节器(振荡器)</span>
<span class="token keyword">var</span> oscillator <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//设置波形，可选值：'square','triangle','sawtooth','sine'</span>
oscillator<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'triangle'</span><span class="token punctuation">;</span> 
oscillator<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">;</span>    <span class="token comment">//设置频率</span>
<span class="token comment">/***创建音量控制节点**/</span>
<span class="token keyword">var</span> gainNode <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token comment">// 先把当前音量设为0  </span>
gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span><span class="token function">setValueAtTime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> audioCtx<span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3秒时间内音量从刚刚的0变成0.5，线性变化  </span>
gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span><span class="token function">linearRampToValueAtTime</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> audioCtx<span class="token punctuation">.</span>currentTime <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/***  将音量链接到振荡器  ***/</span>
oscillator<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>gainNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*** 将音量与设备关联 ***/</span>
gainNode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audioCtx<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*** 开始播放声音 ***/</span>
oscillator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>audioCtx<span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 10秒后停止声音 </span>
oscillator<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>audioCtx<span class="token punctuation">.</span>currentTime <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="获取频率信息"><a href="#获取频率信息" aria-hidden="true" class="header-anchor">#</a> 获取频率信息</h3> <p>我们可以通过<code>AudioContext.createAnalyser()</code>方法来创建一个<a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode" target="_blank" rel="noopener noreferrer">AnalyserNode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>获取音频时间和频率上的一些信息，知道这些信息后我们就可以做一些类似音乐可视化的需求。<a href="https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createAnalyser" target="_blank" rel="noopener noreferrer">createAnalyser API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>属性</strong></p> <ul><li><code>AnalyserNode.fftSize</code> 是无符号长值，表示用于确定频域的FFT（快速傅立叶变换）的大小。</li> <li><code>AnalyserNode.frequencyBinCount</code> 无符号长整数值是FFT大小的一半，这通常等于您可以为可视化使用的数据值的数量。</li></ul> <p><strong>方法</strong></p> <ul><li><code>AnalyserNode.getFloatFrequencyData()</code>将当前频率数据复制到传入其中的<code>Float32Array</code>数组中。</li> <li><code>AnalyserNode.getByteFrequencyData()</code>将当前频率数据复制到传入其中的<code>Uint8Array</code>（无符号字节数组）</li> <li><code>AnalyserNode.getFloatTimeDomainData()</code>将当前波形或时域数据复制到传入其中的<code>Float32Array</code>数组中。</li> <li><code>AnalyserNode.getByteTimeDomainData()</code> 将当前波形或时域数据复制到<code>Uint8Array</code>传递给它的（无符号字节数组）中。</li></ul> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>在获取音频音量信息时，我们需要先将音频<code>AnalyserNode</code>对象链接到音频对象上，然后在将音量节点链接到<code>AnalyserNode</code>对象</p> <ul><li><code>musicSource.connect(analyser)</code> 将;</li> <li><code>analyser.connect(gainNode)</code>;</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> audioCtx <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> analyser <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createAnalyser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> oscillator <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//常见音频节点</span>
<span class="token keyword">var</span> gainNode <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建音量节点</span>

oscillator<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>analyser<span class="token punctuation">)</span>
analyser<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>gainNode<span class="token punctuation">)</span>

analyser<span class="token punctuation">.</span>fftSize <span class="token operator">=</span> <span class="token number">2048</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bufferLength <span class="token operator">=</span> analyser<span class="token punctuation">.</span>frequencyBinCount<span class="token punctuation">;</span>
<span class="token keyword">var</span> dataArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>bufferLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
analyser<span class="token punctuation">.</span><span class="token function">getByteTimeDomainData</span><span class="token punctuation">(</span>dataArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="实例练习-2"><a href="#实例练习-2" aria-hidden="true" class="header-anchor">#</a> 实例练习</h3> <p>下面我们来看看使用<code>Audio Web API</code>制作钢琴的练习<a href="https://github.com/webxiaoma/JavaScript-demos/blob/master/HTML5/audio/audio-api.html" target="_blank" rel="noopener noreferrer">GitHub仓库练习<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <iframe width="810" height="520" src="https://webxiaoma.github.io/JavaScript-demos/HTML5/audio/audio-api.html" style="border:0;"></iframe> <p>下面我们来是使用<code>Audio Web API</code>制作可视化音乐的练习<a href="https://github.com/webxiaoma/JavaScript-demos/blob/master/HTML5/audio/audio-api-two.html" target="_blank" rel="noopener noreferrer">GitHub仓库练习<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <iframe width="810" height="660" src="https://webxiaoma.github.io/JavaScript-demos/HTML5/audio/audio-api-two.html" style="border:0;"></iframe></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/webxiaoma/webxiaoma/edit/dev/docs/javascript/audio.md" target="_blank" rel="noopener noreferrer">文章有问题，欢迎提出！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近更新时间: </span> <span class="time">10/9/2018, 6:04:34 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/javascript/es6-promise.html" class="prev">
          ES6之Promise的简单实现
        </a></span> <span class="next"><a href="/javascript/video.html">
          H5视频处理
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/27.cb2bdcbb.js" defer></script><script src="/assets/js/app.2dd5823d.js" defer></script>
  </body>
</html>
