<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用 DevServer | 马新想个人网站（webxiaoma）</title>
    <meta name="description" content="本文主要讲述webpack中使用 webpack-dev-server或 在webpack4+ 中使用webpack-serve来实现浏览器的自动刷新或热加载功能。">
    <link rel="icon" href="/img/icon.ico">
    <meta name="keywords" content="webpack4, DevServer, webpack-dev-server,webpack-serve，热加载，热模块，浏览器自动刷新">
    <link rel="preload" href="/assets/css/0.styles.74caf1e0.css" as="style"><link rel="preload" href="/assets/js/app.ddedf94a.js" as="script"><link rel="preload" href="/assets/js/49.c082456b.js" as="script"><link rel="prefetch" href="/assets/js/33.93580df8.js"><link rel="prefetch" href="/assets/js/2.eea0509a.js"><link rel="prefetch" href="/assets/js/3.92cc4fac.js"><link rel="prefetch" href="/assets/js/4.61ad26dd.js"><link rel="prefetch" href="/assets/js/5.c2a26591.js"><link rel="prefetch" href="/assets/js/6.2132a336.js"><link rel="prefetch" href="/assets/js/7.80d26d60.js"><link rel="prefetch" href="/assets/js/8.7ebc0969.js"><link rel="prefetch" href="/assets/js/9.59eafed8.js"><link rel="prefetch" href="/assets/js/10.a67c81d4.js"><link rel="prefetch" href="/assets/js/11.5c78d958.js"><link rel="prefetch" href="/assets/js/12.bed41476.js"><link rel="prefetch" href="/assets/js/13.d73a27cd.js"><link rel="prefetch" href="/assets/js/14.dc3eb6ac.js"><link rel="prefetch" href="/assets/js/15.7b00a7ae.js"><link rel="prefetch" href="/assets/js/16.cfcbf433.js"><link rel="prefetch" href="/assets/js/17.0e63d637.js"><link rel="prefetch" href="/assets/js/18.2f16314b.js"><link rel="prefetch" href="/assets/js/19.c67cd72e.js"><link rel="prefetch" href="/assets/js/20.bdcc8c57.js"><link rel="prefetch" href="/assets/js/21.bf7463cc.js"><link rel="prefetch" href="/assets/js/22.c77f0486.js"><link rel="prefetch" href="/assets/js/23.300448b3.js"><link rel="prefetch" href="/assets/js/24.80b098e9.js"><link rel="prefetch" href="/assets/js/25.15ec3655.js"><link rel="prefetch" href="/assets/js/26.8be96a65.js"><link rel="prefetch" href="/assets/js/27.dd70fc2e.js"><link rel="prefetch" href="/assets/js/28.ee4f8ba0.js"><link rel="prefetch" href="/assets/js/29.d9fddddf.js"><link rel="prefetch" href="/assets/js/30.c827a4e5.js"><link rel="prefetch" href="/assets/js/31.47bb34b8.js"><link rel="prefetch" href="/assets/js/32.7ceacea2.js"><link rel="prefetch" href="/assets/js/34.ecfb40d6.js"><link rel="prefetch" href="/assets/js/35.4147e405.js"><link rel="prefetch" href="/assets/js/36.76a2c7ae.js"><link rel="prefetch" href="/assets/js/37.ed120e6a.js"><link rel="prefetch" href="/assets/js/38.2167e20f.js"><link rel="prefetch" href="/assets/js/39.b0a48843.js"><link rel="prefetch" href="/assets/js/40.c37092f9.js"><link rel="prefetch" href="/assets/js/41.c7f416e7.js"><link rel="prefetch" href="/assets/js/42.d13bfea5.js"><link rel="prefetch" href="/assets/js/43.5818c5ba.js"><link rel="prefetch" href="/assets/js/44.3e0582ed.js"><link rel="prefetch" href="/assets/js/45.7b1991ea.js"><link rel="prefetch" href="/assets/js/46.04b42bb3.js"><link rel="prefetch" href="/assets/js/47.0d53c32a.js"><link rel="prefetch" href="/assets/js/48.62cd859a.js"><link rel="prefetch" href="/assets/js/50.ddc7b866.js"><link rel="prefetch" href="/assets/js/51.9bba5ada.js"><link rel="prefetch" href="/assets/js/52.01db5f03.js"><link rel="prefetch" href="/assets/js/53.ff3b5bec.js"><link rel="prefetch" href="/assets/js/54.071ea6c3.js"><link rel="prefetch" href="/assets/js/55.b6b473ea.js"><link rel="prefetch" href="/assets/js/56.3af6e9bd.js"><link rel="prefetch" href="/assets/js/57.7a2755da.js"><link rel="prefetch" href="/assets/js/58.900d84e5.js"><link rel="prefetch" href="/assets/js/59.f33a4752.js"><link rel="prefetch" href="/assets/js/60.f8f70daa.js"><link rel="prefetch" href="/assets/js/61.ec10a736.js"><link rel="prefetch" href="/assets/js/62.744b1d97.js"><link rel="prefetch" href="/assets/js/63.fa7dc119.js"><link rel="prefetch" href="/assets/js/64.238ad0a9.js"><link rel="prefetch" href="/assets/js/65.75fdbfb9.js"><link rel="prefetch" href="/assets/js/66.a8982041.js"><link rel="prefetch" href="/assets/js/67.067a87f0.js"><link rel="prefetch" href="/assets/js/68.3a5900a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74caf1e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/manong.jpg" alt="马新想" class="logo"> <span class="site-name can-hide">马新想个人网站</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide" data-v-b0e23420><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-b0e23420><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        博客
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        JavaScript
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        移动端
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          构建工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Git工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>GitHub</a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma/webxiaoma/issues" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>提出疑问</a></li></ul></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar" data-v-5534fc3a><nav class="nav-links" data-v-b0e23420 data-v-5534fc3a><ul role="menubar" class="el-menu-demo el-menu--horizontal el-menu" style="background-color:;" data-v-b0e23420><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        首页
        <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
        博客
      <i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        JavaScript
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        移动端
         <!----></li><li role="menuitem" aria-haspopup="true" class="el-submenu" data-v-b0e23420><div class="el-submenu__title" style="border-bottom-color:transparent;color:;background-color:;">
          构建工具
        <i class="el-submenu__icon-arrow el-icon-arrow-right"></i></div><div class="el-menu--horizontal" style="display:none;"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-" style="background-color:;"> <li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Webpack打包
           <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
          Git工具
           <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Vue
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        NodeJS
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        Linux
         <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;background-color:;" data-v-b0e23420>
        网络知识
         <!----></li></ul></div></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        English
        <!----></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>GitHub</a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;" data-v-b0e23420>
        
        <a href="https://github.com/webxiaoma/webxiaoma/issues" target="_blank" style="padding-bottom:5px;" data-v-b0e23420>提出疑问</a></li></ul></nav>  <ul class="sidebar-links" data-v-5534fc3a><li data-v-5534fc3a><a href="/webpack/" class="sidebar-link" data-v-5534fc3a>相关文章</a></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>webpack基础篇</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>webpack配置篇</span> <span class="arrow right"></span></p> <!----></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading open"><span>webpack练习篇</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/webpack/处理es6.html" class="sidebar-link">处理ES6</a></li><li><a href="/webpack/处理css.html" class="sidebar-link">处理CSS</a></li><li><a href="/webpack/处理静态资源.html" class="sidebar-link">处理静态资源</a></li><li><a href="/webpack/处理目录文件.html" class="sidebar-link">处理目录文件</a></li><li><a href="/webpack/devserver.html" class="active sidebar-link">使用 DevServer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/devserver.html#实现自动刷新" class="sidebar-link">实现自动刷新</a></li><li class="sidebar-sub-header"><a href="/webpack/devserver.html#实现模块热替换" class="sidebar-link">实现模块热替换</a></li><li class="sidebar-sub-header"><a href="/webpack/devserver.html#webpack-serve-已废弃" class="sidebar-link">webpack-serve 已废弃</a></li></ul></li><li><a href="/webpack/使用vue.html" class="sidebar-link">使用 Vue</a></li><li><a href="/webpack/使用react.html" class="sidebar-link">使用 React</a></li><li><a href="/webpack/懒加载.html" class="sidebar-link">懒加载</a></li><li><a href="/webpack/提取公共模块.html" class="sidebar-link">提取公共模块</a></li><li><a href="/webpack/Dllplugin.html" class="sidebar-link">使用 Dllplugin</a></li></ul></div></li><li data-v-5534fc3a><div class="sidebar-group collapsable" data-v-5534fc3a><p class="sidebar-heading"><span>webpack进阶篇</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="使用-devserver"><a href="#使用-devserver" aria-hidden="true" class="header-anchor">#</a> 使用 DevServer</h1> <ul><li><a href="https://github.com/webxiaoma/webpack-demos/tree/master/webpack4/webpack-dev-server" target="_blank" rel="noopener noreferrer">webpack-dev-server GitHub 仓库练习<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/webxiaoma/webpack-demos/tree/master/webpack4/webpack-serve" target="_blank" rel="noopener noreferrer">webpack-serve GitHub 仓库练习<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <hr> <div class="danger custom-block"><p class="custom-block-title">注意</p> <p><code>webpack-serve</code> 该<a href="https://github.com/webpack-contrib/webpack-serve" target="_blank" rel="noopener noreferrer">仓库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>目前为只读状态，已经被废弃推荐使用<code>webpack-dev-server</code></p></div> <p><code>Webpack v4.0+</code>注意该中提供了几个大模块，一个是核心模块 <code>webpack</code>, 命令模块 <code>webpack-cli</code> 以及 服务器模块 <a href="https://github.com/webpack/webpack-dev-server" target="_blank" rel="noopener noreferrer">webpack-dev-server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。实现浏览器的自动刷新和模块热替换我们可以使用服务器模块 <code>webpack-dev-server</code>。</p> <h2 id="实现自动刷新"><a href="#实现自动刷新" aria-hidden="true" class="header-anchor">#</a> 实现自动刷新</h2> <p>以前在写页面的时候，我们每次修改完代码需要刷新浏览器才可以看到页面修改后的效果，为提高效率现在我们可以使用<code>DevServer</code> 实现我们的效果。</p> <h3 id="启动监听模式"><a href="#启动监听模式" aria-hidden="true" class="header-anchor">#</a> 启动监听模式</h3> <p>在webpack中可以使用<a href="https://webpack.docschina.org/configuration/watch/#watch" target="_blank" rel="noopener noreferrer">watch观察模式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来监听文件的变动，而不需要每次都编译。启动监听这模式有两种方式：</p> <ol><li>执行<code>webpack --watch</code> 命令</li> <li>在配置文件中进行配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启观察者模式</span>
  watchOptions<span class="token punctuation">:</span><span class="token punctuation">{</span> <span class="token comment">//对watch的配置</span>
      <span class="token comment">// 不监听的文件</span>
      ignored<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">//当第一个文件更改，会在重新构建前增加延迟。这个选项允许 webpack </span>
      <span class="token comment">//将这段时间内进行的任何其他更改都聚合到一次重新构建里</span>
      aggregateTimout<span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">,</span>
      <span class="token comment">// 每秒检查一次变动</span>
      poll<span class="token punctuation">:</span><span class="token number">1000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用观察者模式时每次我们修改代码后，<code>webpack</code>都会自动检测出并重新构建我们的项目。其实<code>webpack</code>在这里做的就是将我们文件最后一次修改时间记录了下来，并定时的去检测我们文件的修改时间，如果发现我们新的修改时间和我们的不一致就会自动去构建。另外<code>webpack</code>在执行的时候，我们是可以设置它长时间去检测一次（设置<code>poll</code>），并且检测出变化后，延迟多长时间去构建项目（设置<code>aggregateTimout</code>）。我们在开发项目时，建议将不不是经常改动的文件添加的<code>ignored</code>中，对其不进行监听来提高我们的监听性能。</p> <h3 id="自动刷新"><a href="#自动刷新" aria-hidden="true" class="header-anchor">#</a> 自动刷新</h3> <p>使用观察者模式时每次我们修改代码后，webpack都会自动检测出并重新构建我们的项目，但是这时侯我们依然要手动动刷新页面，想要自动刷新页面我们还要使用<a href="https://github.com/webpack/webpack-dev-server" target="_blank" rel="noopener noreferrer">webpack-dev-server 模块<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 安装</span>
npm i <span class="token operator">-</span><span class="token constant">D</span> webapck<span class="token operator">-</span>dev<span class="token operator">-</span>server
</code></pre></div><p>然后我们可以启动<code>webapck-dev-server</code></p> <div class="language-js extra-class"><pre class="language-js"><code>npx webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server
</code></pre></div><p>当然我们也可以在<code>package.json</code>中添加启动命令</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在`package.json`中添加启动命令</span>
<span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;npx webpack-dev-server&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 然后执行</span>
npm start
</code></pre></div><p>当使用<code>webapck-dev-server</code>启动时，它自动启动<code>webpack</code>，并且<code>webpack</code>的监听模式会被开启，当webpack监听到文件变化后，会通知<code>webapck-dev-server</code>模块，<code>webapck-dev-server</code>模块会去刷新浏览器。<code>webapck-dev-server</code>启动时默认会在<code>8080</code>端口上<a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，此外我们还可以在<code>webpack.config.js</code>中根据<code>devServer</code>字段来来配置<code>webapck-dev-server</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 设置服务器从那个目录提供内容，默认当前</span>
    contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">//告知服务器，观察 devServer.contentBase 下的文件。</span>
    <span class="token comment">//文件修改后，会触发一次完整的页面重载</span>
    watchContentBase<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">//一切服务都启用 gzip 压缩</span>
    compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 刷新模式，false时启用iframe模式</span>
    inline<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">//默认是 localhost。如果你希望服务器外部可访问设置'0.0.0.0'</span>
    host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token number">9000</span> <span class="token comment">// 启动端口默认8080</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否启动热模块替换,(启用下也会启用自动刷新)</span>
    hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 仅启动自动刷新</span>
    proxy<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 设置请求代理</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启动后是否自动打开默认浏览器</span>
    <span class="token comment">//指定打开浏览器时的导航页面。</span>
    openPage<span class="token punctuation">:</span> <span class="token string">'/different/page'</span><span class="token punctuation">,</span>
    <span class="token comment">//当出现编译器错误或警告时，在浏览器中显示全屏覆盖层,默认false</span>
    overlay<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">//允许浏览器使用本地 IP 打开。</span>
    useLocalIp<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    watchOptions<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 和watch模式下的相同</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多配置请查看<a href="https://webpack.docschina.org/configuration/dev-server/#devserver" target="_blank" rel="noopener noreferrer">官网 开发中 server(devServer)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="自动刷新原理"><a href="#自动刷新原理" aria-hidden="true" class="header-anchor">#</a> 自动刷新原理</h3> <p>浏览器的自动刷新有三种方法：</p> <ol><li>借助浏览器扩展去通过浏览器提供的接口刷新。</li> <li>往要开发的网页中注入代理客户端代码，通过代理客户端去刷新整个页面。</li> <li>把要开发的网页装进一个 <code>iframe</code> 中，通过刷新 <code>iframe</code> 去看到最新效果。</li></ol> <p>在<code>webpack</code>中<code>DevServer</code>支持后两种方法，第二种是DevServer默认采用的。如果想要了解具体原理查看<a href="http://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-5%E4%BD%BF%E7%94%A8%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0.html" target="_blank" rel="noopener noreferrer">深入浅出webpack —— 使用自动刷新<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="实现模块热替换"><a href="#实现模块热替换" aria-hidden="true" class="header-anchor">#</a> 实现模块热替换</h2> <p>上边我们使用<code>webapck-dev-server</code>模块自动刷新浏览器来实现我们实时预览的效果，处理自动刷新我们还可以使用模块热替换的方法来实现我们实时预览的效果。</p> <p>模块热替换的方法的实现非常简单，它也集成在了<code>webpack-dev-server</code>中，我们可以通过下面两种方法来实现：</p> <ol><li>执行命令<code>npx webpack-dev-server --hot</code></li> <li><code>webpack.config.js</code>中配置<code>DevServer</code> 启用，同时还要使用<code>webpack.HotModuleReplacementPlugin</code> 插件（在方法一种执行时，以及自动注入并使用了该插件）。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HotModuleReplacementPlugin <span class="token operator">=</span> webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 是否启动热模块替换, 默认关闭(启用下也会启用自动刷新)</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
       <span class="token comment">// 模块热替换</span>
       <span class="token keyword">new</span> <span class="token class-name">HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>模块热替换并不会刷新浏览器，他只时在检测我们代码有变化时，将变化的模块进行编译，然后在变化后的新模块替换浏览器中对应的旧模块。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>需要知道的是当设置<code>hot</code>为<code>true</code>时，也会启动浏览器自动刷新，所以有时候你会看到当模块修改后，我使用的是模块热替换但是浏览器会是会刷新，具体原因可以看看这篇文章<a href="http://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-6%E5%BC%80%E5%90%AF%E6%A8%A1%E5%9D%97%E7%83%AD%E6%9B%BF%E6%8D%A2.html" target="_blank" rel="noopener noreferrer">深入浅出webpack —— 开启模块热替换<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 当我们设置 <code>hotOnly</code>为<code>true</code>时，这时就只会开启模块热替换功能</p></div> <h2 id="webpack-serve-已废弃"><a href="#webpack-serve-已废弃" aria-hidden="true" class="header-anchor">#</a> webpack-serve 已废弃</h2> <p>上面我们说的是<code>webpack3.0+</code>中经常使用的服务器模块，<code>webpack4.0+</code>后，官方又出来一个<a href="https://github.com/webpack-contrib/webpack-serve" target="_blank" rel="noopener noreferrer">webpack-serve<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，而且将来会有要取代<code>webpack-dev-server 模块</code>的趋势。<a href="https://github.com/webpack/webpack-dev-server/issues/1493" target="_blank" rel="noopener noreferrer">webpack-dev-server issues<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，使用该模块需要知道的是：</p> <ul><li>该模块至少需要<span class="badge tip" data-v-589dba97>Node.js v6.9.0</span>和<span class="badge tip" data-v-589dba97>Webpack v4.0.0+</span></li> <li>由于此模块利用本机 <code>WebSockets via webpack-hot-client</code>，因此使用该模块的浏览器需要支持<code>WebSocket</code>。这通常意味着特定浏览器的最后两个主要版本,来查看<a href="https://caniuse.com/#feat=websockets" target="_blank" rel="noopener noreferrer">支持webSocket的浏览器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>使用<code>webpack-serve</code>也很简单，首先先让我们安装它</p> <div class="language-js extra-class"><pre class="language-js"><code>npm i <span class="token operator">-</span><span class="token constant">D</span> webpack<span class="token operator">-</span>serve
</code></pre></div><p>配置webpack-serve 也很简单，我们有四种配置方法</p> <ul><li>在<code>serve</code>属性中的<code>package.json</code>文件中</li> <li>在一个<code>.serverc</code>或<code>.serverc.json</code>文件中，使用<code>JSON</code>或<code>YML</code>。</li> <li>在<code>serve.config.js</code>导出<code>CommonJS</code>模块的文件中（就像<code>webpack</code>一样）</li> <li>在<code>webpack.config.js</code>中的<code>serve</code>字段中配置，如下：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  serve<span class="token punctuation">:</span><span class="token punctuation">{</span>
       port<span class="token punctuation">:</span><span class="token string">'9090'</span><span class="token punctuation">,</span>
       host<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 启动的主机地址</span>
       open<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否自动打开浏览器</span>
       clipboard<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否将服务器URI复制到剪贴板</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多的配置我们可以查看<a href="https://github.com/webpack-contrib/webpack-serve" target="_blank" rel="noopener noreferrer">webpack-serve<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<code>webpack-serve</code>启动后默认就是使用的热模块功能，也不需要像使用<code>webpack-dev-server</code> 一样在使用<code>HotModuleReplacementPlugin</code>插件。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>另外<code>webpack-serve</code>的配置目前并没有像<code>webpack-dev-server</code>有很全的配置，将来什么样我们可以时刻关注。</p></div> <h3 id="本文参考文献"><a href="#本文参考文献" aria-hidden="true" class="header-anchor">#</a> 本文参考文献</h3> <p><a href="http://webpack.wuhaolin.cn" target="_blank" rel="noopener noreferrer">深入浅出webpack —— 吴浩麟<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/webxiaoma/webxiaoma/edit/dev/docs/webpack/devserver.md" target="_blank" rel="noopener noreferrer">文章有问题，欢迎提出！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近更新时间: </span> <span class="time">9/30/2018, 1:53:18 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/webpack/处理目录文件.html" class="prev">
          处理目录文件
        </a></span> <span class="next"><a href="/webpack/使用vue.html">
          使用 Vue
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/49.c082456b.js" defer></script><script src="/assets/js/app.ddedf94a.js" defer></script>
  </body>
</html>
